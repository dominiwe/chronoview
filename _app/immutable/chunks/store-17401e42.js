var Ri=Object.defineProperty;var Oi=(t,e,n)=>e in t?Ri(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var rr=(t,e,n)=>(Oi(t,typeof e!="symbol"?e+"":e,n),n);import{B as Ti}from"./index-d08134e9.js";var nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kn={};function Cr(t,e){return function(){return t.apply(e,arguments)}}const{toString:Pr}=Object.prototype,{getPrototypeOf:Bn}=Object,Kn=(t=>e=>{const n=Pr.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ve=t=>(t=t.toLowerCase(),e=>Kn(e)===t),Lt=t=>e=>typeof e===t,{isArray:Le}=Array,Xe=Lt("undefined");function Ci(t){return t!==null&&!Xe(t)&&t.constructor!==null&&!Xe(t.constructor)&&Ce(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Dr=ve("ArrayBuffer");function Pi(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Dr(t.buffer),e}const Di=Lt("string"),Ce=Lt("function"),kr=Lt("number"),In=t=>t!==null&&typeof t=="object",ki=t=>t===!0||t===!1,bt=t=>{if(Kn(t)!=="object")return!1;const e=Bn(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Bi=ve("Date"),Ki=ve("File"),Ii=ve("Blob"),Fi=ve("FileList"),Ni=t=>In(t)&&Ce(t.pipe),Mi=t=>{const e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||Pr.call(t)===e||Ce(t.toString)&&t.toString()===e)},Li=ve("URLSearchParams"),ji=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ot(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Le(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;let s;for(r=0;r<a;r++)s=o[r],e.call(null,t[s],s,t)}}function Br(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Kr=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:nn)(),Ir=t=>!Xe(t)&&t!==Kr;function rn(){const{caseless:t}=Ir(this)&&this||{},e={},n=(r,i)=>{const o=t&&Br(e,i)||i;bt(e[o])&&bt(r)?e[o]=rn(e[o],r):bt(r)?e[o]=rn({},r):Le(r)?e[o]=r.slice():e[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ot(arguments[r],n);return e}const Ui=(t,e,n,{allOwnKeys:r}={})=>(ot(e,(i,o)=>{n&&Ce(i)?t[o]=Cr(i,n):t[o]=i},{allOwnKeys:r}),t),Hi=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Vi=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},zi=(t,e,n,r)=>{let i,o,a;const s={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)a=i[o],(!r||r(a,t,e))&&!s[a]&&(e[a]=t[a],s[a]=!0);t=n!==!1&&Bn(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Wi=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},qi=t=>{if(!t)return null;if(Le(t))return t;let e=t.length;if(!kr(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},$i=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Bn(Uint8Array)),Ji=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const o=i.value;e.call(t,o[0],o[1])}},Qi=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Yi=ve("HTMLFormElement"),Xi=t=>t.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),ir=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Gi=ve("RegExp"),Fr=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ot(n,(i,o)=>{e(i,o,t)!==!1&&(r[o]=i)}),Object.defineProperties(t,r)},Zi=t=>{Fr(t,(e,n)=>{if(Ce(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ce(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},eo=(t,e)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return Le(t)?r(t):r(String(t).split(e)),n},to=()=>{},no=(t,e)=>(t=+t,Number.isFinite(t)?t:e),ro=t=>{const e=new Array(10),n=(r,i)=>{if(In(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const o=Le(r)?[]:{};return ot(r,(a,s)=>{const u=n(a,i+1);!Xe(u)&&(o[s]=u)}),e[i]=void 0,o}}return r};return n(t,0)};var v={isArray:Le,isArrayBuffer:Dr,isBuffer:Ci,isFormData:Mi,isArrayBufferView:Pi,isString:Di,isNumber:kr,isBoolean:ki,isObject:In,isPlainObject:bt,isUndefined:Xe,isDate:Bi,isFile:Ki,isBlob:Ii,isRegExp:Gi,isFunction:Ce,isStream:Ni,isURLSearchParams:Li,isTypedArray:$i,isFileList:Fi,forEach:ot,merge:rn,extend:Ui,trim:ji,stripBOM:Hi,inherits:Vi,toFlatObject:zi,kindOf:Kn,kindOfTest:ve,endsWith:Wi,toArray:qi,forEachEntry:Ji,matchAll:Qi,isHTMLForm:Yi,hasOwnProperty:ir,hasOwnProp:ir,reduceDescriptors:Fr,freezeMethods:Zi,toObjectSet:eo,toCamelCase:Xi,noop:to,toFiniteNumber:no,findKey:Br,global:Kr,isContextDefined:Ir,toJSONObject:ro};function B(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}v.inherits(B,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:v.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Nr=B.prototype,Mr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Mr[t]={value:t}});Object.defineProperties(B,Mr);Object.defineProperty(Nr,"isAxiosError",{value:!0});B.from=(t,e,n,r,i,o)=>{const a=Object.create(Nr);return v.toFlatObject(t,a,function(u){return u!==Error.prototype},s=>s!=="isAxiosError"),B.call(a,t.message,e,n,r,i),a.cause=t,a.name=t.name,o&&Object.assign(a,o),a};var io=typeof self=="object"?self.FormData:window.FormData,oo=io;function on(t){return v.isPlainObject(t)||v.isArray(t)}function Lr(t){return v.endsWith(t,"[]")?t.slice(0,-2):t}function or(t,e,n){return t?t.concat(e).map(function(i,o){return i=Lr(i),!n&&o?"["+i+"]":i}).join(n?".":""):e}function ao(t){return v.isArray(t)&&!t.some(on)}const so=v.toFlatObject(v,{},null,function(e){return/^is[A-Z]/.test(e)});function uo(t){return t&&v.isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator]}function jt(t,e,n){if(!v.isObject(t))throw new TypeError("target must be an object");e=e||new(oo||FormData),n=v.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(d,g){return!v.isUndefined(g[d])});const r=n.metaTokens,i=n.visitor||l,o=n.dots,a=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&uo(e);if(!v.isFunction(i))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(v.isDate(h))return h.toISOString();if(!u&&v.isBlob(h))throw new B("Blob is not supported. Use a Buffer instead.");return v.isArrayBuffer(h)||v.isTypedArray(h)?u&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function l(h,d,g){let b=h;if(h&&!g&&typeof h=="object"){if(v.endsWith(d,"{}"))d=r?d:d.slice(0,-2),h=JSON.stringify(h);else if(v.isArray(h)&&ao(h)||v.isFileList(h)||v.endsWith(d,"[]")&&(b=v.toArray(h)))return d=Lr(d),b.forEach(function(w,_){!(v.isUndefined(w)||w===null)&&e.append(a===!0?or([d],_,o):a===null?d:d+"[]",c(w))}),!1}return on(h)?!0:(e.append(or(g,d,o),c(h)),!1)}const f=[],p=Object.assign(so,{defaultVisitor:l,convertValue:c,isVisitable:on});function y(h,d){if(!v.isUndefined(h)){if(f.indexOf(h)!==-1)throw Error("Circular reference detected in "+d.join("."));f.push(h),v.forEach(h,function(b,E){(!(v.isUndefined(b)||b===null)&&i.call(e,b,v.isString(E)?E.trim():E,d,p))===!0&&y(b,d?d.concat(E):[E])}),f.pop()}}if(!v.isObject(t))throw new TypeError("data must be an object");return y(t),e}function ar(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Fn(t,e){this._pairs=[],t&&jt(t,this,e)}const jr=Fn.prototype;jr.append=function(e,n){this._pairs.push([e,n])};jr.toString=function(e){const n=e?function(r){return e.call(this,r,ar)}:ar;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function co(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ur(t,e,n){if(!e)return t;const r=n&&n.encode||co,i=n&&n.serialize;let o;if(i?o=i(e,n):o=v.isURLSearchParams(e)?e.toString():new Fn(e,n).toString(r),o){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class lo{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){v.forEach(this.handlers,function(r){r!==null&&e(r)})}}var sr=lo,Hr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fo=typeof URLSearchParams<"u"?URLSearchParams:Fn,ho=FormData;const po=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),vo=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")();var oe={isBrowser:!0,classes:{URLSearchParams:fo,FormData:ho,Blob},isStandardBrowserEnv:po,isStandardBrowserWebWorkerEnv:vo,protocols:["http","https","file","blob","url","data"]};function yo(t,e){return jt(t,new oe.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,o){return oe.isNode&&v.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function mo(t){return v.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function go(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}function Vr(t){function e(n,r,i,o){let a=n[o++];const s=Number.isFinite(+a),u=o>=n.length;return a=!a&&v.isArray(i)?i.length:a,u?(v.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!s):((!i[a]||!v.isObject(i[a]))&&(i[a]=[]),e(n,r,i[a],o)&&v.isArray(i[a])&&(i[a]=go(i[a])),!s)}if(v.isFormData(t)&&v.isFunction(t.entries)){const n={};return v.forEachEntry(t,(r,i)=>{e(mo(r),i,n,0)}),n}return null}const bo={"Content-Type":void 0};function wo(t,e,n){if(v.isString(t))try{return(e||JSON.parse)(t),v.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Ut={transitional:Hr,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=v.isObject(e);if(o&&v.isHTMLForm(e)&&(e=new FormData(e)),v.isFormData(e))return i&&i?JSON.stringify(Vr(e)):e;if(v.isArrayBuffer(e)||v.isBuffer(e)||v.isStream(e)||v.isFile(e)||v.isBlob(e))return e;if(v.isArrayBufferView(e))return e.buffer;if(v.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return yo(e,this.formSerializer).toString();if((s=v.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return jt(s?{"files[]":e}:e,u&&new u,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),wo(e)):e}],transformResponse:[function(e){const n=this.transitional||Ut.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&v.isString(e)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(s){if(a)throw s.name==="SyntaxError"?B.from(s,B.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:oe.classes.FormData,Blob:oe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};v.forEach(["delete","get","head"],function(e){Ut.headers[e]={}});v.forEach(["post","put","patch"],function(e){Ut.headers[e]=v.merge(bo)});var Nn=Ut;const _o=v.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Eo=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||e[n]&&_o[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e};const ur=Symbol("internals");function We(t){return t&&String(t).trim().toLowerCase()}function wt(t){return t===!1||t==null?t:v.isArray(t)?t.map(wt):String(t)}function So(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}function xo(t){return/^[-_a-zA-Z]+$/.test(t.trim())}function cr(t,e,n,r){if(v.isFunction(r))return r.call(this,e,n);if(v.isString(e)){if(v.isString(r))return e.indexOf(r)!==-1;if(v.isRegExp(r))return r.test(e)}}function Ao(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Ro(t,e){const n=v.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,o,a){return this[r].call(this,e,i,o,a)},configurable:!0})})}class Ht{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function o(s,u,c){const l=We(u);if(!l)throw new Error("header name must be a non-empty string");const f=v.findKey(i,l);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||u]=wt(s))}const a=(s,u)=>v.forEach(s,(c,l)=>o(c,l,u));return v.isPlainObject(e)||e instanceof this.constructor?a(e,n):v.isString(e)&&(e=e.trim())&&!xo(e)?a(Eo(e),n):e!=null&&o(n,e,r),this}get(e,n){if(e=We(e),e){const r=v.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return So(i);if(v.isFunction(n))return n.call(this,i,r);if(v.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=We(e),e){const r=v.findKey(this,e);return!!(r&&(!n||cr(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function o(a){if(a=We(a),a){const s=v.findKey(r,a);s&&(!n||cr(r,r[s],s,n))&&(delete r[s],i=!0)}}return v.isArray(e)?e.forEach(o):o(e),i}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(e){const n=this,r={};return v.forEach(this,(i,o)=>{const a=v.findKey(r,o);if(a){n[a]=wt(i),delete n[o];return}const s=e?Ao(o):String(o).trim();s!==o&&delete n[o],n[s]=wt(i),r[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return v.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&v.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[ur]=this[ur]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=We(a);r[s]||(Ro(i,a),r[s]=!0)}return v.isArray(e)?e.forEach(o):o(e),this}}Ht.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);v.freezeMethods(Ht.prototype);v.freezeMethods(Ht);var fe=Ht;function $t(t,e){const n=this||Nn,r=e||n,i=fe.from(r.headers);let o=r.data;return v.forEach(t,function(s){o=s.call(n,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function zr(t){return!!(t&&t.__CANCEL__)}function at(t,e,n){B.call(this,t??"canceled",B.ERR_CANCELED,e,n),this.name="CanceledError"}v.inherits(at,B,{__CANCEL__:!0});var Oo=null;function To(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new B("Request failed with status code "+n.status,[B.ERR_BAD_REQUEST,B.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}var Co=oe.isStandardBrowserEnv?function(){return{write:function(n,r,i,o,a,s){const u=[];u.push(n+"="+encodeURIComponent(r)),v.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),v.isString(o)&&u.push("path="+o),v.isString(a)&&u.push("domain="+a),s===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Po(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Do(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Wr(t,e){return t&&!Po(e)?Do(t,e):e}var ko=oe.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(o){let a=o;return e&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(a){const s=v.isString(a)?i(a):a;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}();function Bo(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Ko(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,o=0,a;return e=e!==void 0?e:1e3,function(u){const c=Date.now(),l=r[o];a||(a=c),n[i]=u,r[i]=c;let f=o,p=0;for(;f!==i;)p+=n[f++],f=f%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),c-a<e)return;const y=l&&c-l;return y?Math.round(p*1e3/y):void 0}}function lr(t,e){let n=0;const r=Ko(50,250);return i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-n,u=r(s),c=o<=a;n=o;const l={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&c?(a-o)/u:void 0,event:i};l[e?"download":"upload"]=!0,t(l)}}const Io=typeof XMLHttpRequest<"u";var Fo=Io&&function(t){return new Promise(function(n,r){let i=t.data;const o=fe.from(t.headers).normalize(),a=t.responseType;let s;function u(){t.cancelToken&&t.cancelToken.unsubscribe(s),t.signal&&t.signal.removeEventListener("abort",s)}v.isFormData(i)&&(oe.isStandardBrowserEnv||oe.isStandardBrowserWebWorkerEnv)&&o.setContentType(!1);let c=new XMLHttpRequest;if(t.auth){const y=t.auth.username||"",h=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(y+":"+h))}const l=Wr(t.baseURL,t.url);c.open(t.method.toUpperCase(),Ur(l,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function f(){if(!c)return;const y=fe.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),d={data:!a||a==="text"||a==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:y,config:t,request:c};To(function(b){n(b),u()},function(b){r(b),u()},d),c=null}if("onloadend"in c?c.onloadend=f:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(f)},c.onabort=function(){c&&(r(new B("Request aborted",B.ECONNABORTED,t,c)),c=null)},c.onerror=function(){r(new B("Network Error",B.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let h=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const d=t.transitional||Hr;t.timeoutErrorMessage&&(h=t.timeoutErrorMessage),r(new B(h,d.clarifyTimeoutError?B.ETIMEDOUT:B.ECONNABORTED,t,c)),c=null},oe.isStandardBrowserEnv){const y=(t.withCredentials||ko(l))&&t.xsrfCookieName&&Co.read(t.xsrfCookieName);y&&o.set(t.xsrfHeaderName,y)}i===void 0&&o.setContentType(null),"setRequestHeader"in c&&v.forEach(o.toJSON(),function(h,d){c.setRequestHeader(d,h)}),v.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),a&&a!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",lr(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",lr(t.onUploadProgress)),(t.cancelToken||t.signal)&&(s=y=>{c&&(r(!y||y.type?new at(null,t,c):y),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(s),t.signal&&(t.signal.aborted?s():t.signal.addEventListener("abort",s)));const p=Bo(l);if(p&&oe.protocols.indexOf(p)===-1){r(new B("Unsupported protocol "+p+":",B.ERR_BAD_REQUEST,t));return}c.send(i||null)})};const _t={http:Oo,xhr:Fo};v.forEach(_t,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});var No={getAdapter:t=>{t=v.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let i=0;i<e&&(n=t[i],!(r=v.isString(n)?_t[n.toLowerCase()]:n));i++);if(!r)throw r===!1?new B(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(v.hasOwnProp(_t,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!v.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:_t};function Jt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new at(null,t)}function fr(t){return Jt(t),t.headers=fe.from(t.headers),t.data=$t.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),No.getAdapter(t.adapter||Nn.adapter)(t).then(function(r){return Jt(t),r.data=$t.call(t,t.transformResponse,r),r.headers=fe.from(r.headers),r},function(r){return zr(r)||(Jt(t),r&&r.response&&(r.response.data=$t.call(t,t.transformResponse,r.response),r.response.headers=fe.from(r.response.headers))),Promise.reject(r)})}const hr=t=>t instanceof fe?t.toJSON():t;function Ne(t,e){e=e||{};const n={};function r(c,l,f){return v.isPlainObject(c)&&v.isPlainObject(l)?v.merge.call({caseless:f},c,l):v.isPlainObject(l)?v.merge({},l):v.isArray(l)?l.slice():l}function i(c,l,f){if(v.isUndefined(l)){if(!v.isUndefined(c))return r(void 0,c,f)}else return r(c,l,f)}function o(c,l){if(!v.isUndefined(l))return r(void 0,l)}function a(c,l){if(v.isUndefined(l)){if(!v.isUndefined(c))return r(void 0,c)}else return r(void 0,l)}function s(c,l,f){if(f in e)return r(c,l);if(f in t)return r(void 0,c)}const u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(c,l)=>i(hr(c),hr(l),!0)};return v.forEach(Object.keys(t).concat(Object.keys(e)),function(l){const f=u[l]||i,p=f(t[l],e[l],l);v.isUndefined(p)&&f!==s||(n[l]=p)}),n}const qr="1.2.2",Mn={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Mn[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const dr={};Mn.transitional=function(e,n,r){function i(o,a){return"[Axios v"+qr+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,s)=>{if(e===!1)throw new B(i(a," has been removed"+(n?" in "+n:"")),B.ERR_DEPRECATED);return n&&!dr[a]&&(dr[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,a,s):!0}};function Mo(t,e,n){if(typeof t!="object")throw new B("options must be an object",B.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],a=e[o];if(a){const s=t[o],u=s===void 0||a(s,o,t);if(u!==!0)throw new B("option "+o+" must be "+u,B.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new B("Unknown option "+o,B.ERR_BAD_OPTION)}}var an={assertOptions:Mo,validators:Mn};const ge=an.validators;class Ct{constructor(e){this.defaults=e,this.interceptors={request:new sr,response:new sr}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ne(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&an.assertOptions(r,{silentJSONParsing:ge.transitional(ge.boolean),forcedJSONParsing:ge.transitional(ge.boolean),clarifyTimeoutError:ge.transitional(ge.boolean)},!1),i!==void 0&&an.assertOptions(i,{encode:ge.function,serialize:ge.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a;a=o&&v.merge(o.common,o[n.method]),a&&v.forEach(["delete","get","head","post","put","patch","common"],h=>{delete o[h]}),n.headers=fe.concat(a,o);const s=[];let u=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(n)===!1||(u=u&&d.synchronous,s.unshift(d.fulfilled,d.rejected))});const c=[];this.interceptors.response.forEach(function(d){c.push(d.fulfilled,d.rejected)});let l,f=0,p;if(!u){const h=[fr.bind(this),void 0];for(h.unshift.apply(h,s),h.push.apply(h,c),p=h.length,l=Promise.resolve(n);f<p;)l=l.then(h[f++],h[f++]);return l}p=s.length;let y=n;for(f=0;f<p;){const h=s[f++],d=s[f++];try{y=h(y)}catch(g){d.call(this,g);break}}try{l=fr.call(this,y)}catch(h){return Promise.reject(h)}for(f=0,p=c.length;f<p;)l=l.then(c[f++],c[f++]);return l}getUri(e){e=Ne(this.defaults,e);const n=Wr(e.baseURL,e.url);return Ur(n,e.params,e.paramsSerializer)}}v.forEach(["delete","get","head","options"],function(e){Ct.prototype[e]=function(n,r){return this.request(Ne(r||{},{method:e,url:n,data:(r||{}).data}))}});v.forEach(["post","put","patch"],function(e){function n(r){return function(o,a,s){return this.request(Ne(s||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Ct.prototype[e]=n(),Ct.prototype[e+"Form"]=n(!0)});var Et=Ct;class Ln{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{r.subscribe(s),o=s}).then(i);return a.cancel=function(){r.unsubscribe(o)},a},e(function(o,a,s){r.reason||(r.reason=new at(o,a,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Ln(function(i){e=i}),cancel:e}}}var Lo=Ln;function jo(t){return function(n){return t.apply(null,n)}}function Uo(t){return v.isObject(t)&&t.isAxiosError===!0}const sn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sn).forEach(([t,e])=>{sn[e]=t});var Ho=sn;function $r(t){const e=new Et(t),n=Cr(Et.prototype.request,e);return v.extend(n,Et.prototype,e,{allOwnKeys:!0}),v.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return $r(Ne(t,i))},n}const V=$r(Nn);V.Axios=Et;V.CanceledError=at;V.CancelToken=Lo;V.isCancel=zr;V.VERSION=qr;V.toFormData=jt;V.AxiosError=B;V.Cancel=V.CanceledError;V.all=function(e){return Promise.all(e)};V.spread=jo;V.isAxiosError=Uo;V.mergeConfig=Ne;V.AxiosHeaders=fe;V.formToJSON=t=>Vr(v.isHTMLForm(t)?new FormData(t):t);V.HttpStatusCode=Ho;V.default=V;var Vo=V,U=nn&&nn.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(l){try{c(r.next(l))}catch(f){a(f)}}function u(l){try{c(r.throw(l))}catch(f){a(f)}}function c(l){l.done?o(l.value):i(l.value).then(s,u)}c((r=r.apply(t,e||[])).next())})};Object.defineProperty(kn,"__esModule",{value:!0});var zo=kn.AWClient=void 0;const pr=Vo;class Wo{constructor(e,n={}){if(this.heartbeatQueues={},this.clientname=e,this.testing=n.testing||!1,typeof n.baseURL>"u"){const r=n.testing?5666:5600;this.baseURL=`http://127.0.0.1:${r}`}else this.baseURL=n.baseURL;this.controller=n.controller||new AbortController,this.req=pr.default.create({baseURL:this.baseURL+"/api",timeout:n.timeout||3e4})}_get(e,n={}){return U(this,void 0,void 0,function*(){return this.req.get(e,Object.assign(Object.assign({},n),{signal:this.controller.signal})).then(r=>r&&r.data||r)})}_post(e,n={}){return U(this,void 0,void 0,function*(){return this.req.post(e,n,{signal:this.controller.signal}).then(r=>r&&r.data||r)})}_delete(e){return U(this,void 0,void 0,function*(){return this.req.delete(e,{signal:this.controller.signal})})}getInfo(){return U(this,void 0,void 0,function*(){return this._get("/0/info")})}abort(e){return U(this,void 0,void 0,function*(){console.info(e||"Requests cancelled"),this.controller.abort(),this.controller=new AbortController})}ensureBucket(e,n,r){return U(this,void 0,void 0,function*(){try{yield this._post(`/0/buckets/${e}`,{client:this.clientname,type:n,hostname:r})}catch(i){if(pr.default.isAxiosError(i)&&i.response&&i.response.status===304)return{alreadyExist:!0};throw i}return{alreadyExist:!1}})}createBucket(e,n,r){return U(this,void 0,void 0,function*(){yield this._post(`/0/buckets/${e}`,{client:this.clientname,type:n,hostname:r})})}deleteBucket(e){return U(this,void 0,void 0,function*(){yield this._delete(`/0/buckets/${e}?force=1`)})}getBuckets(){return U(this,void 0,void 0,function*(){const e=yield this._get("/0/buckets/");return Object.keys(e).forEach(n=>{e[n].created=new Date(e[n].created),e[n].last_updated&&(e[n].last_updated=new Date(e[n].last_updated))}),e})}getBucketInfo(e){return U(this,void 0,void 0,function*(){const n=yield this._get(`/0/buckets/${e}`);return n.created=new Date(n.created),n})}getEvent(e,n){return U(this,void 0,void 0,function*(){const r=yield this._get("/0/buckets/"+e+"/events/"+n);return r.timestamp=new Date(r.timestamp),r})}getEvents(e,n={}){return U(this,void 0,void 0,function*(){const r=yield this._get("/0/buckets/"+e+"/events",{params:n});return r.forEach(i=>{i.timestamp=new Date(i.timestamp)}),r})}countEvents(e,n,r){return U(this,void 0,void 0,function*(){const i={starttime:n?n.toISOString():null,endtime:r?r.toISOString():null};return this._get("/0/buckets/"+e+"/events/count",{params:i})})}insertEvent(e,n){return U(this,void 0,void 0,function*(){yield this.insertEvents(e,[n])})}insertEvents(e,n){return U(this,void 0,void 0,function*(){yield this._post("/0/buckets/"+e+"/events",n)})}replaceEvent(e,n){return U(this,void 0,void 0,function*(){if(n.id===void 0)throw Error("Can't replace event without ID assigned");yield this.insertEvent(e,n)})}deleteEvent(e,n){return U(this,void 0,void 0,function*(){yield this._delete("/0/buckets/"+e+"/events/"+n)})}heartbeat(e,n,r){return Object.prototype.hasOwnProperty.call(this.heartbeatQueues,e)||(this.heartbeatQueues[e]={isProcessing:!1,data:[]}),new Promise((i,o)=>{this.heartbeatQueues[e].data.push({onSuccess:i,onError:o,pulsetime:n,heartbeat:r}),this.updateHeartbeatQueue(e)})}query(e,n){return U(this,void 0,void 0,function*(){const r={query:n,timeperiods:e.map(i=>typeof i!="string"?`${i.start.toISOString()}/${i.end.toISOString()}`:i)};return yield this._post("/0/query/",r)})}send_heartbeat(e,n,r){return U(this,void 0,void 0,function*(){const i="/0/buckets/"+e+"/heartbeat?pulsetime="+n,o=yield this._post(i,r);return o.timestamp=new Date(o.timestamp),o})}updateHeartbeatQueue(e){const n=this.heartbeatQueues[e];if(!n.isProcessing&&n.data.length){const{pulsetime:r,heartbeat:i,onSuccess:o,onError:a}=n.data.shift();n.isProcessing=!0,this.send_heartbeat(e,r,i).then(()=>{o(),n.isProcessing=!1,this.updateHeartbeatQueue(e)}).catch(s=>{a(s),n.isProcessing=!1,this.updateHeartbeatQueue(e)})}}}zo=kn.AWClient=Wo;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var k=function(){return k=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},k.apply(this,arguments)};function un(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var M=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,j=Object.keys,q=Array.isArray;typeof Promise<"u"&&!M.Promise&&(M.Promise=Promise);function J(t,e){return typeof e!="object"||j(e).forEach(function(n){t[n]=e[n]}),t}var Ge=Object.getPrototypeOf,qo={}.hasOwnProperty;function Y(t,e){return qo.call(t,e)}function Me(t,e){typeof e=="function"&&(e=e(Ge(t))),(typeof Reflect>"u"?j:Reflect.ownKeys)(e).forEach(function(n){de(t,n,e[n])})}var Jr=Object.defineProperty;function de(t,e,n,r){Jr(t,e,J(n&&Y(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function je(t){return{from:function(e){return t.prototype=Object.create(e.prototype),de(t.prototype,"constructor",t),{extend:Me.bind(null,t.prototype)}}}}var $o=Object.getOwnPropertyDescriptor;function jn(t,e){var n=$o(t,e),r;return n||(r=Ge(t))&&jn(r,e)}var Jo=[].slice;function Vt(t,e,n){return Jo.call(t,e,n)}function Qr(t,e){return e(t)}function qe(t){if(!t)throw new Error("Assertion Failed")}function Yr(t){M.setImmediate?setImmediate(t):setTimeout(t,0)}function Xr(t,e){return t.reduce(function(n,r,i){var o=e(r,i);return o&&(n[o[0]]=o[1]),n},{})}function Qo(t,e,n){try{t.apply(null,n)}catch(r){e&&e(r)}}function he(t,e){if(Y(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var o=he(t,e[r]);n.push(o)}return n}var a=e.indexOf(".");if(a!==-1){var s=t[e.substr(0,a)];return s===void 0?void 0:he(s,e.substr(a+1))}}function te(t,e,n){if(!(!t||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){qe(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)te(t,e[r],n[r])}else{var o=e.indexOf(".");if(o!==-1){var a=e.substr(0,o),s=e.substr(o+1);if(s==="")n===void 0?q(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var u=t[a];(!u||!Y(t,a))&&(u=t[a]={}),te(u,s,n)}}else n===void 0?q(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Yo(t,e){typeof e=="string"?te(t,e,void 0):"length"in e&&[].map.call(e,function(n){te(t,n,void 0)})}function Gr(t){var e={};for(var n in t)Y(t,n)&&(e[n]=t[n]);return e}var Xo=[].concat;function Zr(t){return Xo.apply([],t)}var ei="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Zr([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return M[t]}),Go=ei.map(function(t){return M[t]});Xr(ei,function(t){return[t,!0]});var we=null;function st(t){we=typeof WeakMap<"u"&&new WeakMap;var e=cn(t);return we=null,e}function cn(t){if(!t||typeof t!="object")return t;var e=we&&we.get(t);if(e)return e;if(q(t)){e=[],we&&we.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(cn(t[n]))}else if(Go.indexOf(t.constructor)>=0)e=t;else{var i=Ge(t);e=i===Object.prototype?{}:Object.create(i),we&&we.set(t,e);for(var o in t)Y(t,o)&&(e[o]=cn(t[o]))}return e}var Zo={}.toString;function ln(t){return Zo.call(t).slice(8,-1)}var fn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ea=typeof fn=="symbol"?function(t){var e;return t!=null&&(e=t[fn])&&e.apply(t)}:function(){return null},Ie={};function ce(t){var e,n,r,i;if(arguments.length===1){if(q(t))return t.slice();if(this===Ie&&typeof t=="string")return[t];if(i=ea(t)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(t==null)return[t];if(e=t.length,typeof e=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var Un=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ae=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ti(t,e){ae=t,ni=e}var ni=function(){return!0},ta=!new Error("").stack;function ke(){if(ta)try{throw ke.arguments,new Error}catch(t){return t}return new Error}function hn(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(ni).map(function(r){return`
`+r}).join("")):""}var na=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],ri=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Hn=na.concat(ri),ra={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ue(t,e){this._e=ke(),this.name=t,this.message=e}je(Ue).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+hn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function ii(t,e){return t+". Errors: "+Object.keys(e).map(function(n){return e[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Pt(t,e,n,r){this._e=ke(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=ii(t,e)}je(Pt).from(Ue);function Je(t,e){this._e=ke(),this.name="BulkError",this.failures=Object.keys(e).map(function(n){return e[n]}),this.failuresByPos=e,this.message=ii(t,e)}je(Je).from(Ue);var Vn=Hn.reduce(function(t,e){return t[e]=e+"Error",t},{}),ia=Ue,C=Hn.reduce(function(t,e){var n=e+"Error";function r(i,o){this._e=ke(),this.name=n,i?typeof i=="string"?(this.message=""+i+(o?`
 `+o:""),this.inner=o||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=ra[e]||n,this.inner=null)}return je(r).from(ia),t[e]=r,t},{});C.Syntax=SyntaxError;C.Type=TypeError;C.Range=RangeError;var vr=ri.reduce(function(t,e){return t[e+"Error"]=C[e],t},{});function oa(t,e){if(!t||t instanceof Ue||t instanceof TypeError||t instanceof SyntaxError||!t.name||!vr[t.name])return t;var n=new vr[t.name](e||t.message,t);return"stack"in t&&de(n,"stack",{get:function(){return this.inner.stack}}),n}var zt=Hn.reduce(function(t,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=C[e]),t},{});zt.ModifyError=Pt;zt.DexieError=Ue;zt.BulkError=Je;function N(){}function ut(t){return t}function aa(t,e){return t==null||t===ut?e:function(n){return e(t(n))}}function Pe(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function sa(t,e){return t===N?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Pe(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Pe(i,this.onerror):i),o!==void 0?o:n}}function ua(t,e){return t===N?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Pe(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Pe(r,this.onerror):r)}}function ca(t,e){return t===N?e:function(n){var r=t.apply(this,arguments);J(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Pe(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Pe(o,this.onerror):o),r===void 0?a===void 0?void 0:a:J(r,a)}}function la(t,e){return t===N?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function zn(t,e){return t===N?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return e.apply(r,o)})}return e.apply(this,arguments)}}var Ze={},fa=100,ha=20,oi=100,Wn=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,Ge(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Ge(e),t]}(),dn=Wn[0],Dt=Wn[1],pn=Wn[2],ai=Dt&&Dt.then,St=dn&&dn.constructor,qn=!!pn,vn=!1,da=pn?function(){pn.then(pt)}:M.setImmediate?setImmediate.bind(null,pt):M.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){pt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(pt,0)},et=function(t,e){$e.push([t,e]),kt&&(da(),kt=!1)},yn=!0,kt=!0,Oe=[],xt=[],mn=null,gn=ut,Fe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:gr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{gr(t[0],t[1])}catch{}})}},R=Fe,$e=[],Te=0,At=[];function A(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=N,this._lib=!1;var e=this._PSD=R;if(ae&&(this._stackHolder=ke(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Ze)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&wn(this,this._value);return}this._state=null,this._value=null,++e.ref,ui(this,t)}var bn={get:function(){var t=R,e=Bt;function n(r,i){var o=this,a=!t.global&&(t!==R||e!==Bt),s=a&&!pe(),u=new A(function(c,l){$n(o,new si(It(r,t,a,s),It(i,t,a,s),c,l,t))});return ae&&fi(u,this),u}return n.prototype=Ze,n},set:function(t){de(this,"then",t&&t.prototype===Ze?bn:{get:function(){return t},set:bn.set})}};Me(A.prototype,{then:bn,_then:function(t,e){$n(this,new si(null,null,t,e,R))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,function(r){return r instanceof e?n(r):Rt(r)}):this.then(null,function(r){return r&&r.name===e?n(r):Rt(r)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),Rt(e)})},stack:{get:function(){if(this._stack)return this._stack;try{vn=!0;var t=li(this,[],ha),e=t.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{vn=!1}}},timeout:function(t,e){var n=this;return t<1/0?new A(function(r,i){var o=setTimeout(function(){return i(new C.Timeout(e))},t);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&de(A.prototype,Symbol.toStringTag,"Dexie.Promise");Fe.env=hi();function si(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}Me(A,{all:function(){var t=ce.apply(null,arguments).map(Kt);return new A(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach(function(i,o){return A.resolve(i).then(function(a){t[o]=a,--r||e(t)},n)})})},resolve:function(t){if(t instanceof A)return t;if(t&&typeof t.then=="function")return new A(function(n,r){t.then(n,r)});var e=new A(Ze,!0,t);return fi(e,mn),e},reject:Rt,race:function(){var t=ce.apply(null,arguments).map(Kt);return new A(function(e,n){t.map(function(r){return A.resolve(r).then(e,n)})})},PSD:{get:function(){return R},set:function(t){return R=t}},totalEchoes:{get:function(){return Bt}},newPSD:Ee,usePSD:Ve,scheduler:{get:function(){return et},set:function(t){et=t}},rejectionMapper:{get:function(){return gn},set:function(t){gn=t}},follow:function(t,e){return new A(function(n,r){return Ee(function(i,o){var a=R;a.unhandleds=[],a.onunhandled=o,a.finalize=Pe(function(){var s=this;va(function(){s.unhandleds.length===0?i():o(s.unhandleds[0])})},a.finalize),t()},e,n,r)})}});St&&(St.allSettled&&de(A,"allSettled",function(){var t=ce.apply(null,arguments).map(Kt);return new A(function(e){t.length===0&&e([]);var n=t.length,r=new Array(n);t.forEach(function(i,o){return A.resolve(i).then(function(a){return r[o]={status:"fulfilled",value:a}},function(a){return r[o]={status:"rejected",reason:a}}).then(function(){return--n||e(r)})})})}),St.any&&typeof AggregateError<"u"&&de(A,"any",function(){var t=ce.apply(null,arguments).map(Kt);return new A(function(e,n){t.length===0&&n(new AggregateError([]));var r=t.length,i=new Array(r);t.forEach(function(o,a){return A.resolve(o).then(function(s){return e(s)},function(s){i[a]=s,--r||n(new AggregateError(i))})})})}));function ui(t,e){try{e(function(n){if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&ct();n&&typeof n.then=="function"?ui(t,function(i,o){n instanceof A?n._then(i,o):n.then(i,o)}):(t._state=!0,t._value=n,ci(t)),r&&lt()}},wn.bind(null,t))}catch(n){wn(t,n)}}function wn(t,e){if(xt.push(e),t._state===null){var n=t._lib&&ct();e=gn(e),t._state=!1,t._value=e,ae&&e!==null&&typeof e=="object"&&!e._promise&&Qo(function(){var r=jn(e,"stack");e._promise=t,de(e,"stack",{get:function(){return vn?r&&(r.get?r.get.apply(e):r.value):t.stack}})}),ya(t),ci(t),n&&lt()}}function ci(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)$n(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Te===0&&(++Te,et(function(){--Te===0&&Jn()},[]))}function $n(t,e){if(t._state===null){t._listeners.push(e);return}var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Te,et(pa,[n,t,e])}function pa(t,e,n){try{mn=e;var r,i=e._value;e._state?r=t(i):(xt.length&&(xt=[]),r=t(i),xt.indexOf(i)===-1&&ma(e)),n.resolve(r)}catch(o){n.reject(o)}finally{mn=null,--Te===0&&Jn(),--n.psd.ref||n.psd.finalize()}}function li(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i=t._value,o,a;i!=null?(o=i.name||"Error",a=i.message||i,r=hn(i,0)):(o=i,a=""),e.push(o+(a?": "+a:"")+r)}return ae&&(r=hn(t._stackHolder,2),r&&e.indexOf(r)===-1&&e.push(r),t._prev&&li(t._prev,e,n)),e}function fi(t,e){var n=e?e._numPrev+1:0;n<fa&&(t._prev=e,t._numPrev=n)}function pt(){ct()&&lt()}function ct(){var t=yn;return yn=!1,kt=!1,t}function lt(){var t,e,n;do for(;$e.length>0;)for(t=$e,$e=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while($e.length>0);yn=!0,kt=!0}function Jn(){var t=Oe;Oe=[],t.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var e=At.slice(0),n=e.length;n;)e[--n]()}function va(t){function e(){t(),At.splice(At.indexOf(e),1)}At.push(e),++Te,et(function(){--Te===0&&Jn()},[])}function ya(t){Oe.some(function(e){return e._value===t._value})||Oe.push(t)}function ma(t){for(var e=Oe.length;e;)if(Oe[--e]._value===t._value){Oe.splice(e,1);return}}function Rt(t){return new A(Ze,!1,t)}function L(t,e){var n=R;return function(){var r=ct(),i=R;try{return Se(n,!0),t.apply(this,arguments)}catch(o){e&&e(o)}finally{Se(i,!1),r&&lt()}}}var W={awaits:0,echoes:0,id:0},ga=0,Ot=[],Qt=0,Bt=0,ba=0;function Ee(t,e,n,r){var i=R,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++ba;var a=Fe.env;o.env=qn?{Promise:A,PromiseProp:{value:A,configurable:!0,writable:!0},all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject,nthen:yr(a.nthen,o),gthen:yr(a.gthen,o)}:{},e&&J(o,e),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=Ve(o,t,n,r);return o.ref===0&&o.finalize(),s}function He(){return W.id||(W.id=++ga),++W.awaits,W.echoes+=oi,W.id}function pe(){return W.awaits?(--W.awaits===0&&(W.id=0),W.echoes=W.awaits*oi,!0):!1}(""+ai).indexOf("[native code]")===-1&&(He=pe=N);function Kt(t){return W.echoes&&t&&t.constructor===St?(He(),t.then(function(e){return pe(),e},function(e){return pe(),H(e)})):t}function wa(t){++Bt,(!W.echoes||--W.echoes===0)&&(W.echoes=W.id=0),Ot.push(R),Se(t,!0)}function _a(){var t=Ot[Ot.length-1];Ot.pop(),Se(t,!1)}function Se(t,e){var n=R;if((e?W.echoes&&(!Qt++||t!==R):Qt&&(!--Qt||t!==R))&&di(e?wa.bind(null,t):_a),t!==R&&(R=t,n===Fe&&(Fe.env=hi()),qn)){var r=Fe.env.Promise,i=t.env;Dt.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(M,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function hi(){var t=M.Promise;return qn?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(M,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Dt.then,gthen:t.prototype.then}:{}}function Ve(t,e,n,r,i){var o=R;try{return Se(t,!0),e(n,r,i)}finally{Se(o,!1)}}function di(t){ai.call(dn,t)}function It(t,e,n,r){return typeof t!="function"?t:function(){var i=R;n&&He(),Se(e,!0);try{return t.apply(this,arguments)}finally{Se(i,!1),r&&di(pe)}}}function yr(t,e){return function(n,r){return t.call(this,It(n,e),It(r,e))}}var mr="unhandledrejection";function gr(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(M.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(mr,!0,!0),J(r,i)):M.CustomEvent&&(r=new CustomEvent(mr,{detail:i}),J(r,i)),r&&M.dispatchEvent&&(dispatchEvent(r),!M.PromiseRejectionEvent&&M.onunhandledrejection))try{M.onunhandledrejection(r)}catch{}ae&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(t.stack||t))}catch{}}var H=A.reject;function _n(t,e,n,r){if(!t.idbdb||!t._state.openComplete&&!R.letThrough&&!t._vip){if(t._state.openComplete)return H(new C.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return H(new C.DatabaseClosed);t.open().catch(N)}return t._state.dbReadyPromise.then(function(){return _n(t,e,n,r)})}else{var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(o){return o.name===Vn.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return _n(t,e,n,r)})):H(o)}return i._promise(e,function(o,a){return Ee(function(){return R.trans=i,r(o,a,i)})}).then(function(o){return i._completion.then(function(){return o})})}}var br="3.2.2",Re=String.fromCharCode(65535),En=-1/0,se="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",pi="String expected.",Qe=[],Wt=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ea=Wt,Sa=Wt,vi=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)},qt="__dbnames",Yt="readonly",Xt="readwrite";function De(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var yi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function vt(t){return typeof t=="string"&&!/\./.test(t)?function(e){return e[t]===void 0&&t in e&&(e=st(e),delete e[t]),e}:function(e){return e}}var xa=function(){function t(){}return t.prototype._trans=function(e,n,r){var i=this._tx||R.trans,o=this.name;function a(u,c,l){if(!l.schema[o])throw new C.NotFound("Table "+o+" not part of transaction");return n(l.idbtrans,l)}var s=ct();try{return i&&i.db===this.db?i===R.trans?i._promise(e,a,r):Ee(function(){return i._promise(e,a,r)},{trans:i,transless:R.transless||R}):_n(this.db,e,[this.name],a)}finally{s&&lt()}},t.prototype.get=function(e,n){var r=this;return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:e}).then(function(o){return r.hook.reading.fire(o)})}).then(n)},t.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(q(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var n=j(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(l){return l.compound&&n.every(function(f){return l.keyPath.indexOf(f)>=0})&&l.keyPath.every(function(f){return n.indexOf(f)>=0})})[0];if(r&&this.db._maxKey!==Re)return this.where(r.name).equals(r.keyPath.map(function(l){return e[l]}));!r&&ae&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,o=this.db._deps.indexedDB;function a(l,f){try{return o.cmp(l,f)===0}catch{return!1}}var s=n.reduce(function(l,f){var p=l[0],y=l[1],h=i[f],d=e[f];return[p||h,p||!h?De(y,h&&h.multi?function(g){var b=he(g,f);return q(b)&&b.some(function(E){return a(d,E)})}:function(g){return a(d,he(g,f))}):y]},[null,null]),u=s[0],c=s[1];return u?this.where(u.name).equals(e[u.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")},t.prototype.filter=function(e){return this.toCollection().and(e)},t.prototype.count=function(e){return this.toCollection().count(e)},t.prototype.offset=function(e){return this.toCollection().offset(e)},t.prototype.limit=function(e){return this.toCollection().limit(e)},t.prototype.each=function(e){return this.toCollection().each(e)},t.prototype.toArray=function(e){return this.toCollection().toArray(e)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,q(e)?"["+e.join("+")+"]":e))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(e){this.schema.mappedClass=e;var n=function(r){if(!r)return r;var i=Object.create(e.prototype);for(var o in r)if(Y(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e},t.prototype.defineClass=function(){function e(n){J(this,n)}return this.mapToClass(e)},t.prototype.add=function(e,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,s=e;return a&&o&&(s=vt(a)(e)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"add",keys:n!=null?[n]:null,values:[s]})}).then(function(u){return u.numFailures?A.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{te(e,a,u)}catch{}return u})},t.prototype.update=function(e,n){if(typeof e=="object"&&!q(e)){var r=he(e,this.schema.primKey.keyPath);if(r===void 0)return H(new C.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?j(n).forEach(function(i){te(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(e).modify(n)},t.prototype.put=function(e,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,s=e;return a&&o&&(s=vt(a)(e)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"put",values:[s],keys:n!=null?[n]:null})}).then(function(u){return u.numFailures?A.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{te(e,a,u)}catch{}return u})},t.prototype.delete=function(e){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[e]})}).then(function(r){return r.numFailures?A.reject(r.failures[0]):void 0})},t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"deleteRange",range:yi})}).then(function(n){return n.numFailures?A.reject(n.failures[0]):void 0})},t.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:e,trans:r}).then(function(i){return i.map(function(o){return n.hook.reading.fire(o)})})})},t.prototype.bulkAdd=function(e,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,c=u.auto,l=u.keyPath;if(l&&o)throw new C.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new C.InvalidArgument("Arguments objects and keys must have the same length");var f=e.length,p=l&&c?e.map(vt(l)):e;return i.core.mutate({trans:s,type:"add",keys:o,values:p,wantResults:a}).then(function(y){var h=y.numFailures,d=y.results,g=y.lastResult,b=y.failures,E=a?d:g;if(h===0)return E;throw new Je(i.name+".bulkAdd(): "+h+" of "+f+" operations failed",b)})})},t.prototype.bulkPut=function(e,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,c=u.auto,l=u.keyPath;if(l&&o)throw new C.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new C.InvalidArgument("Arguments objects and keys must have the same length");var f=e.length,p=l&&c?e.map(vt(l)):e;return i.core.mutate({trans:s,type:"put",keys:o,values:p,wantResults:a}).then(function(y){var h=y.numFailures,d=y.results,g=y.lastResult,b=y.failures,E=a?d:g;if(h===0)return E;throw new Je(i.name+".bulkPut(): "+h+" of "+f+" operations failed",b)})})},t.prototype.bulkDelete=function(e){var n=this,r=e.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:e})}).then(function(i){var o=i.numFailures,a=i.lastResult,s=i.failures;if(o===0)return a;throw new Je(n.name+".bulkDelete(): "+o+" of "+r+" operations failed",s)})},t}();function ft(t){var e={},n=function(s,u){if(u){for(var c=arguments.length,l=new Array(c-1);--c;)l[c-1]=arguments[c];return e[s].subscribe.apply(null,l),t}else if(typeof s=="string")return e[s]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(s,u,c){if(typeof s=="object")return a(s);u||(u=la),c||(c=N);var l={subscribers:[],fire:c,subscribe:function(f){l.subscribers.indexOf(f)===-1&&(l.subscribers.push(f),l.fire=u(l.fire,f))},unsubscribe:function(f){l.subscribers=l.subscribers.filter(function(p){return p!==f}),l.fire=l.subscribers.reduce(u,c)}};return e[s]=n[s]=l,l}function a(s){j(s).forEach(function(u){var c=s[u];if(q(c))o(u,s[u][0],s[u][1]);else if(c==="asap")var l=o(u,ut,function(){for(var p=arguments.length,y=new Array(p);p--;)y[p]=arguments[p];l.subscribers.forEach(function(h){Yr(function(){h.apply(null,y)})})});else throw new C.InvalidArgument("Invalid event config")})}}function ht(t,e){return je(e).from({prototype:t}),e}function Aa(t){return ht(xa.prototype,function(n,r,i){this.db=t,this._tx=i,this.name=n,this.schema=r,this.hook=t._allTables[n]?t._allTables[n].hook:ft(null,{creating:[sa,N],reading:[aa,ut],updating:[ca,N],deleting:[ua,N]})})}function Be(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Gt(t,e){t.filter=De(t.filter,e)}function Zt(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return De(r(),e())}:e,t.justLimit=n&&!r}function Ra(t,e){t.isMatch=De(t.isMatch,e)}function Tt(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new C.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function wr(t,e,n){var r=Tt(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function yt(t,e,n,r){var i=t.replayFilter?De(t.filter,t.replayFilter()):t.filter;if(t.or){var o={},a=function(s,u,c){if(!i||i(u,c,function(p){return u.stop(p)},function(p){return u.fail(p)})){var l=u.primaryKey,f=""+l;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(l)),Y(o,f)||(o[f]=!0,e(s,u,c))}};return Promise.all([t.or._iterate(a,n),_r(wr(t,r,n),t.algorithm,a,!t.keysOnly&&t.valueMapper)])}else return _r(wr(t,r,n),De(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function _r(t,e,n,r){var i=r?function(a,s,u){return n(r(a),s,u)}:n,o=L(i);return t.then(function(a){if(a)return a.start(function(){var s=function(){return a.continue()};(!e||e(a,function(u){return s=u},function(u){a.stop(u),s=N},function(u){a.fail(u),s=N}))&&o(a.value,a,function(u){return s=u}),s()})})}function $(t,e){try{var n=Er(t),r=Er(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return Ta(Sr(t),Sr(e));case"Array":return Oa(t,e)}}catch{}return NaN}function Oa(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,o=0;o<i;++o){var a=$(t[o],e[o]);if(a!==0)return a}return n===r?0:n<r?-1:1}function Ta(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,o=0;o<i;++o)if(t[o]!==e[o])return t[o]<e[o]?-1:1;return n===r?0:n<r?-1:1}function Er(t){var e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";var n=ln(t);return n==="ArrayBuffer"?"binary":n}function Sr(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var Ca=function(){function t(){}return t.prototype._read=function(e,n){var r=this._ctx;return r.error?r.table._trans(null,H.bind(null,r.error)):r.table._trans("readonly",e).then(n)},t.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,H.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},t.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=De(n.algorithm,e)},t.prototype._iterate=function(e,n){return yt(this._ctx,e,n,this._ctx.table.core)},t.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&J(r,e),n._ctx=r,n},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(e){var n=this._ctx;return this._read(function(r){return yt(n,e,r,n.table.core)})},t.prototype.count=function(e){var n=this;return this._read(function(r){var i=n._ctx,o=i.table.core;if(Be(i,!0))return o.count({trans:r,query:{index:Tt(i,o.schema),range:i.range}}).then(function(s){return Math.min(s,i.limit)});var a=0;return yt(i,function(){return++a,!1},r,o).then(function(){return a})}).then(e)},t.prototype.sortBy=function(e,n){var r=e.split(".").reverse(),i=r[0],o=r.length-1;function a(c,l){return l?a(c[r[l]],l-1):c[i]}var s=this._ctx.dir==="next"?1:-1;function u(c,l){var f=a(c,o),p=a(l,o);return f<p?-s:f>p?s:0}return this.toArray(function(c){return c.sort(u)}).then(n)},t.prototype.toArray=function(e){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Be(i,!0)&&i.limit>0){var o=i.valueMapper,a=Tt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:a,range:i.range}}).then(function(u){var c=u.result;return o?c.map(o):c})}else{var s=[];return yt(i,function(u){return s.push(u)},r,i.table.core).then(function(){return s})}},e)},t.prototype.offset=function(e){var n=this._ctx;return e<=0?this:(n.offset+=e,Be(n)?Zt(n,function(){var r=e;return function(i,o){return r===0?!0:r===1?(--r,!1):(o(function(){i.advance(r),r=0}),!1)}}):Zt(n,function(){var r=e;return function(){return--r<0}}),this)},t.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Zt(this._ctx,function(){var n=e;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this},t.prototype.until=function(e,n){return Gt(this._ctx,function(r,i,o){return e(r.value)?(i(o),n):!0}),this},t.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},t.prototype.last=function(e){return this.reverse().first(e)},t.prototype.filter=function(e){return Gt(this._ctx,function(n){return e(n.value)}),Ra(this._ctx,e),this},t.prototype.and=function(e){return this.filter(e)},t.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})},t.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},t.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})},t.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(e)},t.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir==="next"&&Be(n,!0)&&n.limit>0)return this._read(function(i){var o=Tt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(i){var o=i.result;return o}).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(e)},t.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},t.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},t.prototype.lastKey=function(e){return this.reverse().firstKey(e)},t.prototype.distinct=function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return Gt(this._ctx,function(i){var o=i.primaryKey.toString(),a=Y(r,o);return r[o]=!0,!a}),this},t.prototype.modify=function(e){var n=this,r=this._ctx;return this._write(function(i){var o;if(typeof e=="function")o=e;else{var a=j(e),s=a.length;o=function(b){for(var E=!1,w=0;w<s;++w){var _=a[w],m=e[_];he(b,_)!==m&&(te(b,_,m),E=!0)}return E}}var u=r.table.core,c=u.schema.primaryKey,l=c.outbound,f=c.extractKey,p=n.db._options.modifyChunkSize||200,y=[],h=0,d=[],g=function(b,E){var w=E.failures,_=E.numFailures;h+=b-_;for(var m=0,S=j(w);m<S.length;m++){var O=S[m];y.push(w[O])}};return n.clone().primaryKeys().then(function(b){var E=function(w){var _=Math.min(p,b.length-w);return u.getMany({trans:i,keys:b.slice(w,w+_),cache:"immutable"}).then(function(m){for(var S=[],O=[],x=l?[]:null,T=[],P=0;P<_;++P){var I=m[P],F={value:st(I),primKey:b[w+P]};o.call(F,F.value,F)!==!1&&(F.value==null?T.push(b[w+P]):!l&&$(f(I),f(F.value))!==0?(T.push(b[w+P]),S.push(F.value)):(O.push(F.value),l&&x.push(b[w+P])))}var K=Be(r)&&r.limit===1/0&&(typeof e!="function"||e===en)&&{index:r.index,range:r.range};return Promise.resolve(S.length>0&&u.mutate({trans:i,type:"add",values:S}).then(function(z){for(var D in z.failures)T.splice(parseInt(D),1);g(S.length,z)})).then(function(){return(O.length>0||K&&typeof e=="object")&&u.mutate({trans:i,type:"put",keys:x,values:O,criteria:K,changeSpec:typeof e!="function"&&e}).then(function(z){return g(O.length,z)})}).then(function(){return(T.length>0||K&&e===en)&&u.mutate({trans:i,type:"delete",keys:T,criteria:K}).then(function(z){return g(T.length,z)})}).then(function(){return b.length>w+_&&E(w+p)})})};return E(0).then(function(){if(y.length>0)throw new Pt("Error modifying one or more objects",y,h,d);return b.length})})})},t.prototype.delete=function(){var e=this._ctx,n=e.range;return Be(e)&&(e.isPrimKey&&!Sa||n.type===3)?this._write(function(r){var i=e.table.core.schema.primaryKey,o=n;return e.table.core.count({trans:r,query:{index:i,range:o}}).then(function(a){return e.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(function(s){var u=s.failures;s.lastResult,s.results;var c=s.numFailures;if(c)throw new Pt("Could not delete some values",Object.keys(u).map(function(l){return u[l]}),a-c);return a-c})})}):this.modify(en)},t}(),en=function(t,e){return e.value=null};function Pa(t){return ht(Ca.prototype,function(n,r){this.db=t;var i=yi,o=null;if(r)try{i=r()}catch(c){o=c}var a=n._ctx,s=a.table,u=s.hook.reading.fire;this._ctx={table:s,index:a.index,isPrimKey:!a.index||s.schema.primKey.keyPath&&a.index===s.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:a.or,valueMapper:u!==ut?u:null}})}function Da(t,e){return t<e?-1:t===e?0:1}function ka(t,e){return t>e?-1:t===e?0:1}function Q(t,e,n){var r=t instanceof gi?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Ke(t){return new t.Collection(t,function(){return mi("")}).limit(0)}function Ba(t){return t==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function Ka(t){return t==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function Ia(t,e,n,r,i,o){for(var a=Math.min(t.length,r.length),s=-1,u=0;u<a;++u){var c=e[u];if(c!==r[u])return i(t[u],n[u])<0?t.substr(0,u)+n[u]+n.substr(u+1):i(t[u],r[u])<0?t.substr(0,u)+r[u]+n.substr(u+1):s>=0?t.substr(0,s)+e[s]+n.substr(s+1):null;i(t[u],c)<0&&(s=u)}return a<r.length&&o==="next"?t+n.substr(t.length):a<t.length&&o==="prev"?t.substr(0,n.length):s<0?null:t.substr(0,s)+r[s]+n.substr(s+1)}function mt(t,e,n,r){var i,o,a,s,u,c,l,f=n.length;if(!n.every(function(d){return typeof d=="string"}))return Q(t,pi);function p(d){i=Ba(d),o=Ka(d),a=d==="next"?Da:ka;var g=n.map(function(b){return{lower:o(b),upper:i(b)}}).sort(function(b,E){return a(b.lower,E.lower)});s=g.map(function(b){return b.upper}),u=g.map(function(b){return b.lower}),c=d,l=d==="next"?"":r}p("next");var y=new t.Collection(t,function(){return be(s[0],u[f-1]+r)});y._ondirectionchange=function(d){p(d)};var h=0;return y._addAlgorithm(function(d,g,b){var E=d.key;if(typeof E!="string")return!1;var w=o(E);if(e(w,u,h))return!0;for(var _=null,m=h;m<f;++m){var S=Ia(E,w,s[m],u[m],a,c);S===null&&_===null?h=m+1:(_===null||a(_,S)>0)&&(_=S)}return g(_!==null?function(){d.continue(_+l)}:b),!1}),y}function be(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function mi(t){return{type:1,lower:t,upper:t}}var gi=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&!(r&&i)?Ke(this):new this.Collection(this,function(){return be(e,n,!r,!i)})}catch{return Q(this,se)}},t.prototype.equals=function(e){return e==null?Q(this,se):new this.Collection(this,function(){return mi(e)})},t.prototype.above=function(e){return e==null?Q(this,se):new this.Collection(this,function(){return be(e,void 0,!0)})},t.prototype.aboveOrEqual=function(e){return e==null?Q(this,se):new this.Collection(this,function(){return be(e,void 0,!1)})},t.prototype.below=function(e){return e==null?Q(this,se):new this.Collection(this,function(){return be(void 0,e,!1,!0)})},t.prototype.belowOrEqual=function(e){return e==null?Q(this,se):new this.Collection(this,function(){return be(void 0,e)})},t.prototype.startsWith=function(e){return typeof e!="string"?Q(this,pi):this.between(e,e+Re,!0,!0)},t.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):mt(this,function(n,r){return n.indexOf(r[0])===0},[e],Re)},t.prototype.equalsIgnoreCase=function(e){return mt(this,function(n,r){return n===r[0]},[e],"")},t.prototype.anyOfIgnoreCase=function(){var e=ce.apply(Ie,arguments);return e.length===0?Ke(this):mt(this,function(n,r){return r.indexOf(n)!==-1},e,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var e=ce.apply(Ie,arguments);return e.length===0?Ke(this):mt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},e,Re)},t.prototype.anyOf=function(){var e=this,n=ce.apply(Ie,arguments),r=this._cmp;try{n.sort(r)}catch{return Q(this,se)}if(n.length===0)return Ke(this);var i=new this.Collection(this,function(){return be(n[0],n[n.length-1])});i._ondirectionchange=function(a){r=a==="next"?e._ascending:e._descending,n.sort(r)};var o=0;return i._addAlgorithm(function(a,s,u){for(var c=a.key;r(c,n[o])>0;)if(++o,o===n.length)return s(u),!1;return r(c,n[o])===0?!0:(s(function(){a.continue(n[o])}),!1)}),i},t.prototype.notEqual=function(e){return this.inAnyRange([[En,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var e=ce.apply(Ie,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Q(this,se)}var n=e.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[En,i]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(e,n){var r=this,i=this._cmp,o=this._ascending,a=this._descending,s=this._min,u=this._max;if(e.length===0)return Ke(this);if(!e.every(function(m){return m[0]!==void 0&&m[1]!==void 0&&o(m[0],m[1])<=0}))return Q(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",C.InvalidArgument);var c=!n||n.includeLowers!==!1,l=n&&n.includeUppers===!0;function f(m,S){for(var O=0,x=m.length;O<x;++O){var T=m[O];if(i(S[0],T[1])<0&&i(S[1],T[0])>0){T[0]=s(T[0],S[0]),T[1]=u(T[1],S[1]);break}}return O===x&&m.push(S),m}var p=o;function y(m,S){return p(m[0],S[0])}var h;try{h=e.reduce(f,[]),h.sort(y)}catch{return Q(this,se)}var d=0,g=l?function(m){return o(m,h[d][1])>0}:function(m){return o(m,h[d][1])>=0},b=c?function(m){return a(m,h[d][0])>0}:function(m){return a(m,h[d][0])>=0};function E(m){return!g(m)&&!b(m)}var w=g,_=new this.Collection(this,function(){return be(h[0][0],h[h.length-1][1],!c,!l)});return _._ondirectionchange=function(m){m==="next"?(w=g,p=o):(w=b,p=a),h.sort(y)},_._addAlgorithm(function(m,S,O){for(var x=m.key;w(x);)if(++d,d===h.length)return S(O),!1;return E(x)?!0:(r._cmp(x,h[d][1])===0||r._cmp(x,h[d][0])===0||S(function(){p===o?m.continue(h[d][0]):m.continue(h[d][1])}),!1)}),_},t.prototype.startsWithAnyOf=function(){var e=ce.apply(Ie,arguments);return e.every(function(n){return typeof n=="string"})?e.length===0?Ke(this):this.inAnyRange(e.map(function(n){return[n,n+Re]})):Q(this,"startsWithAnyOf() only works with strings")},t}();function Fa(t){return ht(gi.prototype,function(n,r,i){this.db=t,this._ctx={table:n,index:r===":id"?null:r,or:i};var o=t._deps.indexedDB;if(!o)throw new C.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(a,s){return o.cmp(s,a)},this._max=function(a,s){return o.cmp(a,s)>0?a:s},this._min=function(a,s){return o.cmp(a,s)<0?a:s},this._IDBKeyRange=t._deps.IDBKeyRange})}function ie(t){return L(function(e){return tt(e),t(e.target.error),!1})}function tt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var nt="storagemutated",_e="x-storagemutated-1",xe=ft(null,nt),Na=function(){function t(){}return t.prototype._lock=function(){return qe(!R.global),++this._reculock,this._reculock===1&&!R.global&&(R.lockOwnerFor=this),this},t.prototype._unlock=function(){if(qe(!R.global),--this._reculock===0)for(R.global||(R.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Ve(e[1],e[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&R.lockOwnerFor!==this},t.prototype.create=function(e){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(qe(!this.idbtrans),!e&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new C.DatabaseClosed(i);case"MissingAPIError":throw new C.MissingAPI(i.message,i);default:throw new C.OpenFailed(i)}if(!this.active)throw new C.TransactionInactive;return qe(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=L(function(o){tt(o),n._reject(e.error)}),e.onabort=L(function(o){tt(o),n.active&&n._reject(new C.Abort(e.error)),n.active=!1,n.on("abort").fire(o)}),e.oncomplete=L(function(){n.active=!1,n._resolve(),"mutatedParts"in e&&xe.storagemutated.fire(e.mutatedParts)}),this},t.prototype._promise=function(e,n,r){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return H(new C.ReadOnly("Transaction is readonly"));if(!this.active)return H(new C.TransactionInactive);if(this._locked())return new A(function(a,s){i._blockedFuncs.push([function(){i._promise(e,n,r).then(a,s)},R])});if(r)return Ee(function(){var a=new A(function(s,u){i._lock();var c=n(s,u,i);c&&c.then&&c.then(s,u)});return a.finally(function(){return i._unlock()}),a._lib=!0,a});var o=new A(function(a,s){var u=n(a,s,i);u&&u.then&&u.then(a,s)});return o._lib=!0,o},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(e){var n=this._root(),r=A.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var o=n._waitingFor;return new A(function(a,s){r.then(function(u){return n._waitingQueue.push(L(a.bind(null,u)))},function(u){return n._waitingQueue.push(L(s.bind(null,u)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new C.Abort))},t.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(Y(n,e))return n[e];var r=this.schema[e];if(!r)throw new C.NotFound("Table "+e+" not part of transaction");var i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i},t}();function Ma(t){return ht(Na.prototype,function(n,r,i,o,a){var s=this;this.db=t,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=ft(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new A(function(u,c){s._resolve=u,s._reject=c}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(u){var c=s.active;return s.active=!1,s.on.error.fire(u),s.parent?s.parent._reject(u):c&&s.idbtrans&&s.idbtrans.abort(),H(u)})})}function Sn(t,e,n,r,i,o,a){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+bi(e)}}function bi(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function wi(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Xr(n,function(r){return[r.name,r]})}}function La(t){return t.length===1?t[0]:t}var rt=function(t){try{return t.only([[]]),rt=function(){return[[]]},[[]]}catch{return rt=function(){return Re},Re}};function xn(t){return t==null?function(){}:typeof t=="string"?ja(t):function(e){return he(e,t)}}function ja(t){var e=t.split(".");return e.length===1?function(n){return n[t]}:function(n){return he(n,t)}}function xr(t){return[].slice.call(t)}var Ua=0;function Ye(t){return t==null?":id":typeof t=="string"?t:"["+t.join("+")+"]"}function Ha(t,e,n){function r(f,p){var y=xr(f.objectStoreNames);return{schema:{name:f.name,tables:y.map(function(h){return p.objectStore(h)}).map(function(h){var d=h.keyPath,g=h.autoIncrement,b=q(d),E=d==null,w={},_={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:E,compound:b,keyPath:d,autoIncrement:g,unique:!0,extractKey:xn(d)},indexes:xr(h.indexNames).map(function(m){return h.index(m)}).map(function(m){var S=m.name,O=m.unique,x=m.multiEntry,T=m.keyPath,P=q(T),I={name:S,compound:P,keyPath:T,unique:O,multiEntry:x,extractKey:xn(T)};return w[Ye(T)]=I,I}),getIndexByKeyPath:function(m){return w[Ye(m)]}};return w[":id"]=_.primaryKey,d!=null&&(w[Ye(d)]=_.primaryKey),_})},hasGetAll:y.length>0&&"getAll"in p.objectStore(y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var p=f.lower,y=f.upper,h=f.lowerOpen,d=f.upperOpen,g=p===void 0?y===void 0?null:e.upperBound(y,!!d):y===void 0?e.lowerBound(p,!!h):e.bound(p,y,!!h,!!d);return g}function o(f){var p=f.name;function y(g){var b=g.trans,E=g.type,w=g.keys,_=g.values,m=g.range;return new Promise(function(S,O){S=L(S);var x=b.objectStore(p),T=x.keyPath==null,P=E==="put"||E==="add";if(!P&&E!=="delete"&&E!=="deleteRange")throw new Error("Invalid operation type: "+E);var I=(w||_||{length:1}).length;if(w&&_&&w.length!==_.length)throw new Error("Given keys array must have same length as given values array.");if(I===0)return S({numFailures:0,failures:{},results:[],lastResult:void 0});var F,K=[],z=[],D=0,X=function(re){++D,tt(re)};if(E==="deleteRange"){if(m.type===4)return S({numFailures:D,failures:z,results:[],lastResult:void 0});m.type===3?K.push(F=x.clear()):K.push(F=x.delete(i(m)))}else{var Z=P?T?[_,w]:[_,null]:[w,null],ye=Z[0],ne=Z[1];if(P)for(var G=0;G<I;++G)K.push(F=ne&&ne[G]!==void 0?x[E](ye[G],ne[G]):x[E](ye[G])),F.onerror=X;else for(var G=0;G<I;++G)K.push(F=x[E](ye[G])),F.onerror=X}var me=function(re){var ze=re.target.result;K.forEach(function(ee,dt){return ee.error!=null&&(z[dt]=ee.error)}),S({numFailures:D,failures:z,results:E==="delete"?w:K.map(function(ee){return ee.result}),lastResult:ze})};F.onerror=function(re){X(re),me(re)},F.onsuccess=me})}function h(g){var b=g.trans,E=g.values,w=g.query,_=g.reverse,m=g.unique;return new Promise(function(S,O){S=L(S);var x=w.index,T=w.range,P=b.objectStore(p),I=x.isPrimaryKey?P:P.index(x.name),F=_?m?"prevunique":"prev":m?"nextunique":"next",K=E||!("openKeyCursor"in I)?I.openCursor(i(T),F):I.openKeyCursor(i(T),F);K.onerror=ie(O),K.onsuccess=L(function(z){var D=K.result;if(!D){S(null);return}D.___id=++Ua,D.done=!1;var X=D.continue.bind(D),Z=D.continuePrimaryKey;Z&&(Z=Z.bind(D));var ye=D.advance.bind(D),ne=function(){throw new Error("Cursor not started")},G=function(){throw new Error("Cursor not stopped")};D.trans=b,D.stop=D.continue=D.continuePrimaryKey=D.advance=ne,D.fail=L(O),D.next=function(){var me=this,re=1;return this.start(function(){return re--?me.continue():me.stop()}).then(function(){return me})},D.start=function(me){var re=new Promise(function(ee,dt){ee=L(ee),K.onerror=ie(dt),D.fail=dt,D.stop=function(Ai){D.stop=D.continue=D.continuePrimaryKey=D.advance=G,ee(Ai)}}),ze=function(){if(K.result)try{me()}catch(ee){D.fail(ee)}else D.done=!0,D.start=function(){throw new Error("Cursor behind last entry")},D.stop()};return K.onsuccess=L(function(ee){K.onsuccess=ze,ze()}),D.continue=X,D.continuePrimaryKey=Z,D.advance=ye,ze(),re},S(D)},O)})}function d(g){return function(b){return new Promise(function(E,w){E=L(E);var _=b.trans,m=b.values,S=b.limit,O=b.query,x=S===1/0?void 0:S,T=O.index,P=O.range,I=_.objectStore(p),F=T.isPrimaryKey?I:I.index(T.name),K=i(P);if(S===0)return E({result:[]});if(g){var z=m?F.getAll(K,x):F.getAllKeys(K,x);z.onsuccess=function(ye){return E({result:ye.target.result})},z.onerror=ie(w)}else{var D=0,X=m||!("openKeyCursor"in F)?F.openCursor(K):F.openKeyCursor(K),Z=[];X.onsuccess=function(ye){var ne=X.result;if(!ne)return E({result:Z});if(Z.push(m?ne.value:ne.primaryKey),++D===S)return E({result:Z});ne.continue()},X.onerror=ie(w)}})}}return{name:p,schema:f,mutate:y,getMany:function(g){var b=g.trans,E=g.keys;return new Promise(function(w,_){w=L(w);for(var m=b.objectStore(p),S=E.length,O=new Array(S),x=0,T=0,P,I=function(D){var X=D.target;(O[X._pos]=X.result)!=null,++T===x&&w(O)},F=ie(_),K=0;K<S;++K){var z=E[K];z!=null&&(P=m.get(E[K]),P._pos=K,P.onsuccess=I,P.onerror=F,++x)}x===0&&w(O)})},get:function(g){var b=g.trans,E=g.key;return new Promise(function(w,_){w=L(w);var m=b.objectStore(p),S=m.get(E);S.onsuccess=function(O){return w(O.target.result)},S.onerror=ie(_)})},query:d(u),openCursor:h,count:function(g){var b=g.query,E=g.trans,w=b.index,_=b.range;return new Promise(function(m,S){var O=E.objectStore(p),x=w.isPrimaryKey?O:O.index(w.name),T=i(_),P=T?x.count(T):x.count();P.onsuccess=L(function(I){return m(I.target.result)}),P.onerror=ie(S)})}}}var a=r(t,n),s=a.schema,u=a.hasGetAll,c=s.tables.map(function(f){return o(f)}),l={};return c.forEach(function(f){return l[f.name]=f}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(f){var p=l[f];if(!p)throw new Error("Table '"+f+"' not found");return l[f]},MIN_KEY:-1/0,MAX_KEY:rt(e),schema:s}}function Va(t,e){return e.reduce(function(n,r){var i=r.create;return k(k({},n),i(n))},t)}function za(t,e,n,r){var i=n.IDBKeyRange;n.indexedDB;var o=Va(Ha(e,i,r),t.dbcore);return{dbcore:o}}function Qn(t,e){var n=t._novip,r=e.db,i=za(n._middlewares,r,n._deps,e);n.core=i.dbcore,n.tables.forEach(function(o){var a=o.name;n.core.schema.tables.some(function(s){return s.name===a})&&(o.core=n.core.table(a),n[a]instanceof n.Table&&(n[a].core=o.core))})}function Ft(t,e,n,r){var i=t._novip;n.forEach(function(o){var a=r[o];e.forEach(function(s){var u=jn(s,o);(!u||"value"in u&&u.value===void 0)&&(s===i.Transaction.prototype||s instanceof i.Transaction?de(s,o,{get:function(){return this.table(o)},set:function(c){Jr(this,o,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):s[o]=new i.Table(o,a))})})}function An(t,e){var n=t._novip;e.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function Wa(t,e){return t._cfg.version-e._cfg.version}function qa(t,e,n,r){var i=t._dbSchema,o=t._createTransaction("readwrite",t._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),s=R.transless||R;Ee(function(){R.trans=o,R.transless=s,e===0?(j(i).forEach(function(u){Yn(n,u,i[u].primKey,i[u].indexes)}),Qn(t,n),A.follow(function(){return t.on.populate.fire(o)}).catch(a)):$a(t,e,o,n).catch(a)})}function $a(t,e,n,r){var i=t._novip,o=[],a=i._versions,s=i._dbSchema=Xn(i,i.idbdb,r),u=!1,c=a.filter(function(f){return f._cfg.version>=e});c.forEach(function(f){o.push(function(){var p=s,y=f._cfg.dbschema;On(i,p,r),On(i,y,r),s=i._dbSchema=y;var h=_i(p,y);h.add.forEach(function(_){Yn(r,_[0],_[1].primKey,_[1].indexes)}),h.change.forEach(function(_){if(_.recreate)throw new C.Upgrade("Not yet support for changing primary key");var m=r.objectStore(_.name);_.add.forEach(function(S){return Rn(m,S)}),_.change.forEach(function(S){m.deleteIndex(S.name),Rn(m,S)}),_.del.forEach(function(S){return m.deleteIndex(S)})});var d=f._cfg.contentUpgrade;if(d&&f._cfg.version>e){Qn(i,r),n._memoizedTables={},u=!0;var g=Gr(y);h.del.forEach(function(_){g[_]=p[_]}),An(i,[i.Transaction.prototype]),Ft(i,[i.Transaction.prototype],j(g),g),n.schema=g;var b=Un(d);b&&He();var E,w=A.follow(function(){if(E=d(n),E&&b){var _=pe.bind(null,null);E.then(_,_)}});return E&&typeof E.then=="function"?A.resolve(E):w.then(function(){return E})}}),o.push(function(p){if(!u||!Ea){var y=f._cfg.dbschema;Qa(y,p)}An(i,[i.Transaction.prototype]),Ft(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function l(){return o.length?A.resolve(o.shift()(n.idbtrans)).then(l):A.resolve()}return l().then(function(){Ja(s,r)})}function _i(t,e){var n={del:[],add:[],change:[]},r;for(r in t)e[r]||n.del.push(r);for(r in e){var i=t[r],o=e[r];if(!i)n.add.push([r,o]);else{var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!Wt)a.recreate=!0,n.change.push(a);else{var s=i.idxByName,u=o.idxByName,c=void 0;for(c in s)u[c]||a.del.push(c);for(c in u){var l=s[c],f=u[c];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}}return n}function Yn(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(o){return Rn(i,o)}),i}function Ja(t,e){j(t).forEach(function(n){e.db.objectStoreNames.contains(n)||Yn(e,n,t[n].primKey,t[n].indexes)})}function Qa(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(n){return t[n]==null&&e.db.deleteObjectStore(n)})}function Rn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Xn(t,e,n){var r={},i=Vt(e.objectStoreNames,0);return i.forEach(function(o){for(var a=n.objectStore(o),s=a.keyPath,u=Sn(bi(s),s||"",!1,!1,!!a.autoIncrement,s&&typeof s!="string",!0),c=[],l=0;l<a.indexNames.length;++l){var f=a.index(a.indexNames[l]);s=f.keyPath;var p=Sn(f.name,s,!!f.unique,!!f.multiEntry,!1,s&&typeof s!="string",!1);c.push(p)}r[o]=wi(o,u,c)}),r}function Ya(t,e,n){var r=t._novip;r.verno=e.version/10;var i=r._dbSchema=Xn(r,e,n);r._storeNames=Vt(e.objectStoreNames,0),Ft(r,[r._allTables],j(i),i)}function Xa(t,e){var n=Xn(t,t.idbdb,e),r=_i(n,t._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function On(t,e,n){for(var r=t._novip,i=n.db.objectStoreNames,o=0;o<i.length;++o){var a=i[o],s=n.objectStore(a);r._hasGetAll="getAll"in s;for(var u=0;u<s.indexNames.length;++u){var c=s.indexNames[u],l=s.index(c).keyPath,f=typeof l=="string"?l:"["+Vt(l).join("+")+"]";if(e[a]){var p=e[a].idxByName[f];p&&(p.name=c,delete e[a].idxByName[f],e[a].idxByName[c]=p)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&M.WorkerGlobalScope&&M instanceof M.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function Ga(t){return t.split(",").map(function(e,n){e=e.trim();var r=e.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Sn(r,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),q(i),n===0)})}var Za=function(){function t(){}return t.prototype._parseStoresSpec=function(e,n){j(e).forEach(function(r){if(e[r]!==null){var i=Ga(e[r]),o=i.shift();if(o.multi)throw new C.Schema("Primary key cannot be multi-valued");i.forEach(function(a){if(a.auto)throw new C.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new C.Schema("Index must have a name and cannot be an empty string")}),n[r]=wi(r,o,i)}})},t.prototype.stores=function(e){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?J(this._cfg.storesSource,e):e;var r=n._versions,i={},o={};return r.forEach(function(a){J(i,a._cfg.storesSource),o=a._cfg.dbschema={},a._parseStoresSpec(i,o)}),n._dbSchema=o,An(n,[n._allTables,n,n.Transaction.prototype]),Ft(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],j(o),o),n._storeNames=j(o),this},t.prototype.upgrade=function(e){return this._cfg.contentUpgrade=zn(this._cfg.contentUpgrade||N,e),this},t}();function es(t){return ht(Za.prototype,function(n){this.db=t,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Gn(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new nr(qt,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Zn(t){return t&&typeof t.databases=="function"}function ts(t){var e=t.indexedDB,n=t.IDBKeyRange;return Zn(e)?Promise.resolve(e.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==qt})}):Gn(e,n).toCollection().primaryKeys()}function ns(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!Zn(n)&&e!==qt&&Gn(n,r).put({name:e}).catch(N)}function rs(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!Zn(n)&&e!==qt&&Gn(n,r).delete(e).catch(N)}function Tn(t){return Ee(function(){return R.letThrough=!0,t()})}function is(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)})}function os(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?H(e.dbOpenError):t});ae&&(e.openCanceller._stackHolder=ke()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new C.DatabaseClosed("db.open() was cancelled")}var o=e.dbReadyResolve,a=null,s=!1;return A.race([r,(typeof navigator>"u"?A.resolve():is()).then(function(){return new A(function(u,c){if(i(),!n)throw new C.MissingAPI;var l=t.name,f=e.autoSchema?n.open(l):n.open(l,Math.round(t.verno*10));if(!f)throw new C.MissingAPI;f.onerror=ie(c),f.onblocked=L(t._fireOnBlocked),f.onupgradeneeded=L(function(p){if(a=f.transaction,e.autoSchema&&!t._options.allowEmptyDB){f.onerror=tt,a.abort(),f.result.close();var y=n.deleteDatabase(l);y.onsuccess=y.onerror=L(function(){c(new C.NoSuchDatabase("Database "+l+" doesnt exist"))})}else{a.onerror=ie(c);var h=p.oldVersion>Math.pow(2,62)?0:p.oldVersion;s=h<1,t._novip.idbdb=f.result,qa(t,h/10,a,c)}},c),f.onsuccess=L(function(){a=null;var p=t._novip.idbdb=f.result,y=Vt(p.objectStoreNames);if(y.length>0)try{var h=p.transaction(La(y),"readonly");e.autoSchema?Ya(t,p,h):(On(t,t._dbSchema,h),Xa(t,h)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Qn(t,h)}catch{}Qe.push(t),p.onversionchange=L(function(d){e.vcFired=!0,t.on("versionchange").fire(d)}),p.onclose=L(function(d){t.on("close").fire(d)}),s&&ns(t._deps,l),u()},c)})})]).then(function(){return i(),e.onReadyBeingFired=[],A.resolve(Tn(function(){return t.on.ready.fire(t.vip)})).then(function u(){if(e.onReadyBeingFired.length>0){var c=e.onReadyBeingFired.reduce(zn,N);return e.onReadyBeingFired=[],A.resolve(Tn(function(){return c(t.vip)})).then(u)}})}).finally(function(){e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(function(){return t}).catch(function(u){e.dbOpenError=u;try{a&&a.abort()}catch{}return r===e.openCanceller&&t._close(),H(u)}).finally(function(){e.openComplete=!0,o()})}function Cn(t){var e=function(a){return t.next(a)},n=function(a){return t.throw(a)},r=o(e),i=o(n);function o(a){return function(s){var u=a(s),c=u.value;return u.done?c:!c||typeof c.then!="function"?q(c)?Promise.all(c).then(r,i):r(c):c.then(r,i)}}return o(e)()}function as(t,e,n){var r=arguments.length;if(r<2)throw new C.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=Zr(i);return[t,o,n]}function Ei(t,e,n,r,i){return A.resolve().then(function(){var o=R.transless||R,a=t._createTransaction(e,n,t._dbSchema,r),s={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),t._state.PR1398_maxLoop=3}catch(f){return f.name===Vn.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return Ei(t,e,n,null,i)})):H(f)}var u=Un(i);u&&He();var c,l=A.follow(function(){if(c=i.call(a,a),c)if(u){var f=pe.bind(null,null);c.then(f,f)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=Cn(c))},s);return(c&&typeof c.then=="function"?A.resolve(c).then(function(f){return a.active?f:H(new C.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):l.then(function(){return c})).then(function(f){return r&&a._resolve(),a._completion.then(function(){return f})}).catch(function(f){return a._reject(f),H(f)})})}function gt(t,e,n){for(var r=q(t)?t.slice():[t],i=0;i<n;++i)r.push(e);return r}function ss(t){return k(k({},t),{table:function(e){var n=t.table(e),r=n.schema,i={},o=[];function a(d,g,b){var E=Ye(d),w=i[E]=i[E]||[],_=d==null?0:typeof d=="string"?1:d.length,m=g>0,S=k(k({},b),{isVirtual:m,keyTail:g,keyLength:_,extractKey:xn(d),unique:!m&&b.unique});if(w.push(S),S.isPrimaryKey||o.push(S),_>1){var O=_===2?d[0]:d.slice(0,_-1);a(O,g+1,b)}return w.sort(function(x,T){return x.keyTail-T.keyTail}),S}var s=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];for(var u=0,c=r.indexes;u<c.length;u++){var l=c[u];a(l.keyPath,0,l)}function f(d){var g=i[Ye(d)];return g&&g[0]}function p(d,g){return{type:d.type===1?2:d.type,lower:gt(d.lower,d.lowerOpen?t.MAX_KEY:t.MIN_KEY,g),lowerOpen:!0,upper:gt(d.upper,d.upperOpen?t.MIN_KEY:t.MAX_KEY,g),upperOpen:!0}}function y(d){var g=d.query.index;return g.isVirtual?k(k({},d),{query:{index:g,range:p(d.query.range,g.keyTail)}}):d}var h=k(k({},n),{schema:k(k({},r),{primaryKey:s,indexes:o,getIndexByKeyPath:f}),count:function(d){return n.count(y(d))},query:function(d){return n.query(y(d))},openCursor:function(d){var g=d.query.index,b=g.keyTail,E=g.isVirtual,w=g.keyLength;if(!E)return n.openCursor(d);function _(m){function S(x){x!=null?m.continue(gt(x,d.reverse?t.MAX_KEY:t.MIN_KEY,b)):d.unique?m.continue(m.key.slice(0,w).concat(d.reverse?t.MIN_KEY:t.MAX_KEY,b)):m.continue()}var O=Object.create(m,{continue:{value:S},continuePrimaryKey:{value:function(x,T){m.continuePrimaryKey(gt(x,t.MAX_KEY,b),T)}},primaryKey:{get:function(){return m.primaryKey}},key:{get:function(){var x=m.key;return w===1?x[0]:x.slice(0,w)}},value:{get:function(){return m.value}}});return O}return n.openCursor(y(d)).then(function(m){return m&&_(m)})}});return h}})}var us={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:ss};function er(t,e,n,r){return n=n||{},r=r||"",j(t).forEach(function(i){if(!Y(e,i))n[r+i]=void 0;else{var o=t[i],a=e[i];if(typeof o=="object"&&typeof a=="object"&&o&&a){var s=ln(o),u=ln(a);s!==u?n[r+i]=e[i]:s==="Object"?er(o,a,n,r+i+"."):o!==a&&(n[r+i]=e[i])}else o!==a&&(n[r+i]=e[i])}}),j(e).forEach(function(i){Y(t,i)||(n[r+i]=e[i])}),n}function cs(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var ls={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return k(k({},t),{table:function(e){var n=t.table(e),r=n.schema.primaryKey,i=k(k({},n),{mutate:function(o){var a=R.trans,s=a.table(e).hook,u=s.deleting,c=s.creating,l=s.updating;switch(o.type){case"add":if(c.fire===N)break;return a._promise("readwrite",function(){return f(o)},!0);case"put":if(c.fire===N&&l.fire===N)break;return a._promise("readwrite",function(){return f(o)},!0);case"delete":if(u.fire===N)break;return a._promise("readwrite",function(){return f(o)},!0);case"deleteRange":if(u.fire===N)break;return a._promise("readwrite",function(){return p(o)},!0)}return n.mutate(o);function f(h){var d=R.trans,g=h.keys||cs(r,h);if(!g)throw new Error("Keys missing");return h=h.type==="add"||h.type==="put"?k(k({},h),{keys:g}):k({},h),h.type!=="delete"&&(h.values=un([],h.values,!0)),h.keys&&(h.keys=un([],h.keys,!0)),fs(n,h,g).then(function(b){var E=g.map(function(w,_){var m=b[_],S={onerror:null,onsuccess:null};if(h.type==="delete")u.fire.call(S,w,m,d);else if(h.type==="add"||m===void 0){var O=c.fire.call(S,w,h.values[_],d);w==null&&O!=null&&(w=O,h.keys[_]=w,r.outbound||te(h.values[_],r.keyPath,w))}else{var x=er(m,h.values[_]),T=l.fire.call(S,x,w,m,d);if(T){var P=h.values[_];Object.keys(T).forEach(function(I){Y(P,I)?P[I]=T[I]:te(P,I,T[I])})}}return S});return n.mutate(h).then(function(w){for(var _=w.failures,m=w.results,S=w.numFailures,O=w.lastResult,x=0;x<g.length;++x){var T=m?m[x]:g[x],P=E[x];T==null?P.onerror&&P.onerror(_[x]):P.onsuccess&&P.onsuccess(h.type==="put"&&b[x]?h.values[x]:T)}return{failures:_,results:m,numFailures:S,lastResult:O}}).catch(function(w){return E.forEach(function(_){return _.onerror&&_.onerror(w)}),Promise.reject(w)})})}function p(h){return y(h.trans,h.range,1e4)}function y(h,d,g){return n.query({trans:h,values:!1,query:{index:r,range:d},limit:g}).then(function(b){var E=b.result;return f({type:"delete",keys:E,trans:h}).then(function(w){return w.numFailures>0?Promise.reject(w.failures[0]):E.length<g?{failures:[],numFailures:0,lastResult:void 0}:y(h,k(k({},d),{lower:E[E.length-1],lowerOpen:!0}),g)})})}}});return i}})}};function fs(t,e,n){return e.type==="add"?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function Si(t,e,n){try{if(!e||e.keys.length<t.length)return null;for(var r=[],i=0,o=0;i<e.keys.length&&o<t.length;++i)$(e.keys[i],t[o])===0&&(r.push(n?st(e.values[i]):e.values[i]),++o);return r.length===t.length?r:null}catch{return null}}var hs={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var n=t.table(e);return k(k({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Si(r.keys,r.trans._cache,r.cache==="clone");return i?A.resolve(i):n.getMany(r).then(function(o){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?st(o):o},o})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},tn;function tr(t){return!("from"in t)}var ue=function(t,e){if(this)J(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0});else{var n=new ue;return t&&"d"in t&&J(n,t),n}};Me(ue.prototype,(tn={add:function(t){return Nt(this,t),this},addKey:function(t){return it(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(n){return it(e,n,n)}),this}},tn[fn]=function(){return Pn(this)},tn));function it(t,e,n){var r=$(e,n);if(!isNaN(r)){if(r>0)throw RangeError();if(tr(t))return J(t,{from:e,to:n,d:1});var i=t.l,o=t.r;if($(n,t.from)<0)return i?it(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Ar(t);if($(e,t.to)>0)return o?it(o,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Ar(t);$(e,t.from)<0&&(t.from=e,t.l=null,t.d=o?o.d+1:1),$(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);var a=!t.r;i&&!t.l&&Nt(t,i),o&&a&&Nt(t,o)}}function Nt(t,e){function n(r,i){var o=i.from,a=i.to,s=i.l,u=i.r;it(r,o,a),s&&n(r,s),u&&n(r,u)}tr(e)||n(t,e)}function ds(t,e){var n=Pn(e),r=n.next();if(r.done)return!1;for(var i=r.value,o=Pn(t),a=o.next(i.from),s=a.value;!r.done&&!a.done;){if($(s.from,i.to)<=0&&$(s.to,i.from)>=0)return!0;$(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(a=o.next(i.from)).value}return!1}function Pn(t){var e=tr(t)?null:{s:0,n:t};return{next:function(n){for(var r=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&$(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||$(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Ar(t){var e,n,r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var o=i==="r"?"l":"r",a=k({},t),s=t[i];t.from=s.from,t.to=s.to,t[i]=s[i],a[i]=s[o],t[o]=a,a.d=Rr(a)}t.d=Rr(t)}function Rr(t){var e=t.r,n=t.l;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}var ps={stack:"dbcore",level:0,create:function(t){var e=t.schema.name,n=new ue(t.MIN_KEY,t.MAX_KEY);return k(k({},t),{table:function(r){var i=t.table(r),o=i.schema,a=o.primaryKey,s=a.extractKey,u=a.outbound,c=k(k({},i),{mutate:function(p){var y=p.trans,h=y.mutatedParts||(y.mutatedParts={}),d=function(O){var x="idb://"+e+"/"+r+"/"+O;return h[x]||(h[x]=new ue)},g=d(""),b=d(":dels"),E=p.type,w=p.type==="deleteRange"?[p.range]:p.type==="delete"?[p.keys]:p.values.length<50?[[],p.values]:[],_=w[0],m=w[1],S=p.trans._cache;return i.mutate(p).then(function(O){if(q(_)){E!=="delete"&&(_=O.results),g.addKeys(_);var x=Si(_,S);!x&&E!=="add"&&b.addKeys(_),(x||m)&&vs(d,o,x,m)}else if(_){var T={from:_.lower,to:_.upper};b.add(T),g.add(T)}else g.add(n),b.add(n),o.indexes.forEach(function(P){return d(P.name).add(n)});return O})}}),l=function(p){var y,h,d=p.query,g=d.index,b=d.range;return[g,new ue((y=b.lower)!==null&&y!==void 0?y:t.MIN_KEY,(h=b.upper)!==null&&h!==void 0?h:t.MAX_KEY)]},f={get:function(p){return[a,new ue(p.key)]},getMany:function(p){return[a,new ue().addKeys(p.keys)]},count:l,query:l,openCursor:l};return j(f).forEach(function(p){c[p]=function(y){var h=R.subscr;if(h){var d=function(S){var O="idb://"+e+"/"+r+"/"+S;return h[O]||(h[O]=new ue)},g=d(""),b=d(":dels"),E=f[p](y),w=E[0],_=E[1];if(d(w.name||"").add(_),!w.isPrimaryKey)if(p==="count")b.add(n);else{var m=p==="query"&&u&&y.values&&i.query(k(k({},y),{values:!1}));return i[p].apply(this,arguments).then(function(S){if(p==="query"){if(u&&y.values)return m.then(function(P){var I=P.result;return g.addKeys(I),S});var O=y.values?S.result.map(s):S.result;y.values?g.addKeys(O):b.addKeys(O)}else if(p==="openCursor"){var x=S,T=y.values;return x&&Object.create(x,{key:{get:function(){return b.addKey(x.primaryKey),x.key}},primaryKey:{get:function(){var P=x.primaryKey;return b.addKey(P),P}},value:{get:function(){return T&&g.addKey(x.primaryKey),x.value}}})}return S})}}return i[p].apply(this,arguments)}}),c}})}};function vs(t,e,n,r){function i(o){var a=t(o.name||"");function s(c){return c!=null?o.extractKey(c):null}var u=function(c){return o.multiEntry&&q(c)?c.forEach(function(l){return a.addKey(l)}):a.addKey(c)};(n||r).forEach(function(c,l){var f=n&&s(n[l]),p=r&&s(r[l]);$(f,p)!==0&&(f!=null&&u(f),p!=null&&u(p))})}e.indexes.forEach(i)}var nr=function(){function t(e,n){var r=this;this._middlewares={},this.verno=0;var i=t.dependencies;this._options=n=k({addons:t.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:N,dbReadyPromise:null,cancelOpen:N,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};a.dbReadyPromise=new A(function(s){a.dbReadyResolve=s}),a.openCanceller=new A(function(s,u){a.cancelOpen=u}),this._state=a,this.name=e,this.on=ft(this,"populate","blocked","versionchange","close",{ready:[zn,N]}),this.on.ready.subscribe=Qr(this.on.ready.subscribe,function(s){return function(u,c){t.vip(function(){var l=r._state;if(l.openComplete)l.dbOpenError||A.resolve().then(u),c&&s(u);else if(l.onReadyBeingFired)l.onReadyBeingFired.push(u),c&&s(u);else{s(u);var f=r;c||s(function p(){f.on.ready.unsubscribe(u),f.on.ready.unsubscribe(p)})}})}}),this.Collection=Pa(this),this.Table=Aa(this),this.Transaction=Ma(this),this.Version=es(this),this.WhereClause=Fa(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+s.oldVersion/10)}),this._maxKey=rt(n.IDBKeyRange),this._createTransaction=function(s,u,c,l){return new r.Transaction(s,u,c,r._options.chromeTransactionDurability,l)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),Qe.filter(function(u){return u.name===r.name&&u!==r&&!u._state.vcFired}).map(function(u){return u.on("versionchange").fire(s)})},this.use(us),this.use(ls),this.use(ps),this.use(hs),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(function(s){return s(r)})}return t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new C.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new C.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,r=n.filter(function(i){return i._cfg.version===e})[0];return r||(r=new this.Version(e),n.push(r),n.sort(Wa),r.stores({}),this._state.autoSchema=!1,r)},t.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||R.letThrough||this._vip)?e():new A(function(r,i){if(n._state.openComplete)return i(new C.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new C.DatabaseClosed);return}n.open().catch(N)}n._state.dbReadyPromise.then(r,i)}).then(e)},t.prototype.use=function(e){var n=e.stack,r=e.create,i=e.level,o=e.name;o&&this.unuse({stack:n,name:o});var a=this._middlewares[n]||(this._middlewares[n]=[]);return a.push({stack:n,create:r,level:i??10,name:o}),a.sort(function(s,u){return s.level-u.level}),this},t.prototype.unuse=function(e){var n=e.stack,r=e.name,i=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(o){return i?o.create!==i:r?o.name!==r:!1})),this},t.prototype.open=function(){return os(this)},t.prototype._close=function(){var e=this._state,n=Qe.indexOf(this);if(n>=0&&Qe.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new A(function(r){e.dbReadyResolve=r}),e.openCanceller=new A(function(r,i){e.cancelOpen=i})},t.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new C.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},t.prototype.delete=function(){var e=this,n=arguments.length>0,r=this._state;return new A(function(i,o){var a=function(){e.close();var s=e._deps.indexedDB.deleteDatabase(e.name);s.onsuccess=L(function(){rs(e._deps,e.name),i()}),s.onerror=ie(o),s.onblocked=e._fireOnBlocked};if(n)throw new C.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var e=this;return j(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var e=as.apply(this,arguments);return this._transaction.apply(this,e)},t.prototype._transaction=function(e,n,r){var i=this,o=R.trans;(!o||o.db!==this||e.indexOf("!")!==-1)&&(o=null);var a=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var s,u;try{if(u=n.map(function(l){var f=l instanceof i.Table?l.name:l;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),e=="r"||e===Yt)s=Yt;else if(e=="rw"||e==Xt)s=Xt;else throw new C.InvalidArgument("Invalid transaction mode: "+e);if(o){if(o.mode===Yt&&s===Xt)if(a)o=null;else throw new C.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&u.forEach(function(l){if(o&&o.storeNames.indexOf(l)===-1)if(a)o=null;else throw new C.SubTransaction("Table "+l+" not included in parent transaction.")}),a&&o&&!o.active&&(o=null)}}catch(l){return o?o._promise(null,function(f,p){p(l)}):H(l)}var c=Ei.bind(null,this,s,u,o,r);return o?o._promise(s,c,"lock"):R.trans?Ve(R.transless,function(){return i._whenReady(c)}):this._whenReady(c)},t.prototype.table=function(e){if(!Y(this._allTables,e))throw new C.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},t}(),ys=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ms=function(){function t(e){this._subscribe=e}return t.prototype.subscribe=function(e,n,r){return this._subscribe(!e||typeof e=="function"?{next:e,error:n,complete:r}:e)},t.prototype[ys]=function(){return this},t}();function xi(t,e){return j(e).forEach(function(n){var r=t[n]||(t[n]=new ue);Nt(r,e[n])}),t}function gs(t){return new ms(function(e){var n=Un(t);function r(y){n&&He();var h=function(){return Ee(t,{subscr:y,trans:null})},d=R.trans?Ve(R.transless,h):h();return n&&d.then(pe,pe),d}var i=!1,o={},a={},s={get closed(){return i},unsubscribe:function(){i=!0,xe.storagemutated.unsubscribe(f)}};e.start&&e.start(s);var u=!1,c=!1;function l(){return j(a).some(function(y){return o[y]&&ds(o[y],a[y])})}var f=function(y){xi(o,y),l()&&p()},p=function(){if(!(u||i)){o={};var y={},h=r(y);c||(xe(nt,f),c=!0),u=!0,Promise.resolve(h).then(function(d){u=!1,!i&&(l()?p():(o={},a=y,e.next&&e.next(d)))},function(d){u=!1,e.error&&e.error(d),s.unsubscribe()})}};return p(),s})}var Dn;try{Dn={indexedDB:M.indexedDB||M.mozIndexedDB||M.webkitIndexedDB||M.msIndexedDB,IDBKeyRange:M.IDBKeyRange||M.webkitIDBKeyRange}}catch{Dn={indexedDB:null,IDBKeyRange:null}}var Ae=nr;Me(Ae,k(k({},zt),{delete:function(t){var e=new Ae(t,{addons:[]});return e.delete()},exists:function(t){return new Ae(t,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return ts(Ae.dependencies).then(t)}catch{return H(new C.MissingAPI)}},defineClass:function(){function t(e){J(this,e)}return t},ignoreTransaction:function(t){return R.trans?Ve(R.transless,t):t()},vip:Tn,async:function(t){return function(){try{var e=Cn(t.apply(this,arguments));return!e||typeof e.then!="function"?A.resolve(e):e}catch(n){return H(n)}}},spawn:function(t,e,n){try{var r=Cn(t.apply(n,e||[]));return!r||typeof r.then!="function"?A.resolve(r):r}catch(i){return H(i)}},currentTransaction:{get:function(){return R.trans||null}},waitFor:function(t,e){var n=A.resolve(typeof t=="function"?Ae.ignoreTransaction(t):t).timeout(e||6e4);return R.trans?R.trans.waitFor(n):n},Promise:A,debug:{get:function(){return ae},set:function(t){ti(t,t==="dexie"?function(){return!0}:vi)}},derive:je,extend:J,props:Me,override:Qr,Events:ft,on:xe,liveQuery:gs,extendObservabilitySet:xi,getByKeyPath:he,setByKeyPath:te,delByKeyPath:Yo,shallowClone:Gr,deepClone:st,getObjectDiff:er,cmp:$,asap:Yr,minKey:En,addons:[],connections:Qe,errnames:Vn,dependencies:Dn,semVer:br,version:br.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,n*2)})}));Ae.maxKey=rt(Ae.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(xe(nt,function(t){if(!le){var e;Wt?(e=document.createEvent("CustomEvent"),e.initCustomEvent(_e,!0,!0,t)):e=new CustomEvent(_e,{detail:t}),le=!0,dispatchEvent(e),le=!1}}),addEventListener(_e,function(t){var e=t.detail;le||Mt(e)}));function Mt(t){var e=le;try{le=!0,xe.storagemutated.fire(t)}finally{le=e}}var le=!1;if(typeof BroadcastChannel<"u"){var Or=new BroadcastChannel(_e);xe(nt,function(t){le||Or.postMessage(t)}),Or.onmessage=function(t){t.data&&Mt(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){xe(nt,function(t){try{le||(typeof localStorage<"u"&&localStorage.setItem(_e,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&un([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(e){return e.postMessage({type:_e,changedParts:t})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(t){if(t.key===_e){var e=JSON.parse(t.newValue);e&&Mt(e.changedParts)}});var Tr=self.document&&navigator.serviceWorker;Tr&&Tr.addEventListener("message",bs)}function bs(t){var e=t.data;e&&e.type===_e&&Mt(e.changedParts)}A.rejectionMapper=oa;ti(ae,vi);class ws extends nr{constructor(){super("myDatabase");rr(this,"friends");this.version(1).stores({friends:"++id, name, age"})}}new ws;const _s=0,Es=(()=>{{const t=parseInt(localStorage.count);if(!Number.isNaN(t))return t}return _s})(),Ss=Ti(Es);Ss.subscribe(t=>{localStorage.count=t});export{zo as A};
